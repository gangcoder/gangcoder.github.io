<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="5865px" height="732px" viewBox="-0.5 -0.5 5865 732" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-08-18T00:43:08.003Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.6.5 Chrome/80.0.3987.86 Electron/8.0.0 Safari/537.36&quot; etag=&quot;AJqNdg1OgzCULDuyF8JE&quot; version=&quot;12.6.5&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;MFD7ubEAZ1WirQK3aZBu&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-1975-208-236-26-0"><rect x="1975" y="208" width="236" height="26"/></clipPath><clipPath id="mx-clip-1975-234-236-26-0"><rect x="1975" y="234" width="236" height="26"/></clipPath><clipPath id="mx-clip-1975-260-236-26-0"><rect x="1975" y="260" width="236" height="26"/></clipPath><clipPath id="mx-clip-1975-286-236-26-0"><rect x="1975" y="286" width="236" height="26"/></clipPath></defs><g><path d="M 1970 203 L 1970 177 L 2211 177 L 2211 203" fill="#1dbf97" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1970 203 L 1970 307 L 2211 307 L 2211 203" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1970 203 L 2211 203" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="1976.5" y="195">HealthCheck</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1975-208-236-26-0)" font-size="13px"><text x="1976.5" y="221.5">- Node: string</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1975-234-236-26-0)" font-size="13px"><text x="1976.5" y="247.5">- CheckID: types.CheckID</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1975-260-236-26-0)" font-size="13px"><text x="1976.5" y="273.5">- Status: string</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1975-286-236-26-0)" font-size="13px"><text x="1976.5" y="299.5">- Definition: HealthCheckDefinition</text></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 187px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">1. 查询checks 列表</div></div></div></foreignObject><text x="32" y="191" fill="#000000" font-family="source code pro" font-size="13px">1. 查询checks 列表</text></switch></g><rect x="30" y="210" width="180" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 173px; height: 1px; padding-top: 240px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">ChecksInState(...)</div></div></div></foreignObject><text x="37" y="244" fill="#000000" font-family="source code pro" font-size="13px">ChecksInState(...)</text></switch></g><rect x="290" y="168" width="720" height="144" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 713px; height: 1px; padding-top: 240px; margin-left: 297px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return h.srv.blockingQuery(<br />    &amp;args.QueryOptions,<br />    &amp;reply.QueryMeta,<br />    func(ws memdb.WatchSet, state *state.Store) error {<br />        index, checks, err = state.ChecksInState(ws, args.State, &amp;args.EnterpriseMeta)<br />        reply.Index, reply.HealthChecks = index, checks<br />        return h.srv.sortNodesByDistanceFrom(args.Source, reply.HealthChecks)<br />    })</div></div></div></foreignObject><text x="297" y="244" fill="#000000" font-family="source code pro" font-size="13px">return h.srv.blockingQuery(...</text></switch></g><rect x="1070" y="210" width="187" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 180px; height: 1px; padding-top: 240px; margin-left: 1077px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">ChecksInState(...)</div></div></div></foreignObject><text x="1077" y="244" fill="#000000" font-family="source code pro" font-size="13px">ChecksInState(...)</text></switch></g><rect x="1332" y="174" width="520" height="132" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 513px; height: 1px; padding-top: 240px; margin-left: 1339px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">tx := s.db.Txn(false)<br />defer tx.Abort()<br />idx, iter, err := s.checksInStateTxn(tx, ws, state, entMeta)<br />for check := iter.Next(); check != nil; check = iter.Next() {<br />    results = append(results, check.(*structs.HealthCheck))<br />}<br />return idx, results, nil</div></div></div></foreignObject><text x="1339" y="244" fill="#000000" font-family="source code pro" font-size="13px">tx := s.db.Txn(false)...</text></switch></g><path d="M 210 240 L 283.63 240" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 288.88 240 L 281.88 243.5 L 283.63 240 L 281.88 236.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1010 240 L 1063.63 240" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1068.88 240 L 1061.88 243.5 L 1063.63 240 L 1061.88 236.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1257 240 L 1325.63 240" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1330.88 240 L 1323.88 243.5 L 1325.63 240 L 1323.88 236.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 367px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">2. 加载健康检查配置</div></div></div></foreignObject><text x="32" y="371" fill="#000000" font-family="source code pro" font-size="13px">2. 加载健康检查配置</text></switch></g><rect x="30" y="387" width="190" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 183px; height: 1px; padding-top: 417px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">a.loadChecks(c, nil)</div></div></div></foreignObject><text x="37" y="421" fill="#000000" font-family="source code pro" font-size="13px">a.loadChecks(c, nil)</text></switch></g><rect x="290" y="387" width="145" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 417px; margin-left: 297px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">loadChecks(...)</div></div></div></foreignObject><text x="297" y="421" fill="#000000" font-family="source code pro" font-size="13px">loadChecks(...)</text></switch></g><rect x="520" y="363" width="625" height="108" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 618px; height: 1px; padding-top: 417px; margin-left: 527px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">for _, check := range conf.Checks {<br />    health := check.HealthCheck(conf.NodeName)<br />    chkType := check.CheckType()<br />    a.addCheckLocked(health, chkType, false, check.Token, ConfigSourceLocal)<br />}</div></div></div></foreignObject><text x="527" y="421" fill="#000000" font-family="source code pro" font-size="13px">for _, check := range conf.Checks {...</text></switch></g><rect x="1257" y="387" width="196" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 189px; height: 1px; padding-top: 417px; margin-left: 1264px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">addCheckLocked(...)</div></div></div></foreignObject><text x="1264" y="421" fill="#000000" font-family="source code pro" font-size="13px">addCheckLocked(...)</text></switch></g><rect x="1540" y="387" width="570" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 563px; height: 1px; padding-top: 417px; margin-left: 1547px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">err := a.addCheck(check, chkType, service, persist, token, source)</div></div></div></foreignObject><text x="1547" y="421" fill="#000000" font-family="source code pro" font-size="13px">err := a.addCheck(check, chkType, service, persist, token, source)</text></switch></g><rect x="2200" y="387" width="142" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 135px; height: 1px; padding-top: 417px; margin-left: 2207px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">addCheck(...)</div></div></div></foreignObject><text x="2207" y="421" fill="#000000" font-family="source code pro" font-size="13px">addCheck(...)</text></switch></g><rect x="2442" y="387" width="479" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 472px; height: 1px; padding-top: 417px; margin-left: 2449px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">statusHandler := checks.NewStatusHandler(a.State, ...)</div></div></div></foreignObject><text x="2449" y="421" fill="#000000" font-family="source code pro" font-size="13px">statusHandler := checks.NewStatusHandler(a.State, ...)</text></switch></g><path d="M 3541 393.5 L 4999 393.5 Q 5009 393.5 5009 403.5 L 5009 610.63" fill="none" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 5009 615.88 L 5005.5 608.88 L 5009 610.63 L 5012.5 608.88 Z" fill="#019ed5" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><rect x="3001" y="340" width="540" height="107" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 533px; height: 1px; padding-top: 394px; margin-left: 3008px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func NewStatusHandler(inner CheckNotifier, ...) *StatusHandler {<br />    return &amp;StatusHandler{<br />        logger:                 logger,<br />        inner:                  inner,<br />    }<br />}</div></div></div></foreignObject><text x="3008" y="397" fill="#000000" font-family="source code pro" font-size="13px">func NewStatusHandler(inner CheckNotifier, ...) *StatusHandler {...</text></switch></g><rect x="2442" y="460" width="356" height="168" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 349px; height: 1px; padding-top: 544px; margin-left: 2449px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">switch {<br />case chkType.IsHTTP():<br />    http := &amp;checks.CheckHTTP{<br />        CheckID:         cid,<br />        ServiceID:       sid,<br />        StatusHandler:   statusHandler,<br />    }<br />    http.Start()<br />    a.checkHTTPs[cid] = http<br />}</div></div></div></foreignObject><text x="2449" y="548" fill="#000000" font-family="source code pro" font-size="13px">switch {...</text></switch></g><rect x="2878" y="514" width="88" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 81px; height: 1px; padding-top: 544px; margin-left: 2885px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Start()</div></div></div></foreignObject><text x="2885" y="548" fill="#000000" font-family="source code pro" font-size="13px">Start()</text></switch></g><rect x="3038" y="514" width="115" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 108px; height: 1px; padding-top: 544px; margin-left: 3045px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">go c.run()</div></div></div></foreignObject><text x="3045" y="548" fill="#000000" font-family="source code pro" font-size="13px">go c.run()</text></switch></g><rect x="3238" y="514" width="70" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 63px; height: 1px; padding-top: 544px; margin-left: 3245px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">run()</div></div></div></foreignObject><text x="3245" y="548" fill="#000000" font-family="source code pro" font-size="13px">run()</text></switch></g><rect x="3388" y="472" width="337" height="144" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 330px; height: 1px; padding-top: 544px; margin-left: 3395px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">next := time.After(initialPauseTime)<br />for {<br />    select {<br />    case &lt;-next:<br />        c.check()<br />        next = time.After(c.Interval)<br />    }<br />}</div></div></div></foreignObject><text x="3395" y="548" fill="#000000" font-family="source code pro" font-size="13px">next := time.After(initialPauseTime)...</text></switch></g><rect x="3818" y="514" width="88" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 81px; height: 1px; padding-top: 544px; margin-left: 3825px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">check()</div></div></div></foreignObject><text x="3825" y="548" fill="#000000" font-family="source code pro" font-size="13px">check()</text></switch></g><rect x="4028" y="508" width="460" height="72" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 453px; height: 1px; padding-top: 544px; margin-left: 4035px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">req, err := http.NewRequest(method, target, bodyReader)<br />resp, err := c.httpClient.Do(req)</div></div></div></foreignObject><text x="4035" y="548" fill="#000000" font-family="source code pro" font-size="13px">req, err := http.NewRequest(method, target, bodyReader)...</text></switch></g><rect x="4028" y="593" width="580" height="108" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 573px; height: 1px; padding-top: 647px; margin-left: 4035px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">if resp.StatusCode &gt;= 200 &amp;&amp; resp.StatusCode &lt;= 299 {<br />    c.StatusHandler.updateCheck(c.CheckID, api.HealthPassing, result)<br />} else {<br />    c.StatusHandler.updateCheck(c.CheckID, api.HealthCritical, result)<br />}</div></div></div></foreignObject><text x="4035" y="651" fill="#000000" font-family="source code pro" font-size="13px">if resp.StatusCode &gt;= 200 &amp;&amp; resp.StatusCode &lt;= 299 {...</text></switch></g><rect x="4668" y="617" width="169" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 162px; height: 1px; padding-top: 647px; margin-left: 4675px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">updateCheck(...)</div></div></div></foreignObject><text x="4675" y="651" fill="#000000" font-family="source code pro" font-size="13px">updateCheck(...)</text></switch></g><rect x="4914" y="617" width="380" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 373px; height: 1px; padding-top: 647px; margin-left: 4921px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">s.inner.UpdateCheck(checkID, status, output)</div></div></div></foreignObject><text x="4921" y="651" fill="#000000" font-family="source code pro" font-size="13px">s.inner.UpdateCheck(checkID, status, output)</text></switch></g><rect x="5364" y="617" width="169" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 162px; height: 1px; padding-top: 647px; margin-left: 5371px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">UpdateCheck(...)</div></div></div></foreignObject><text x="5371" y="651" fill="#000000" font-family="source code pro" font-size="13px">UpdateCheck(...)</text></switch></g><rect x="5614" y="605" width="220" height="84" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 213px; height: 1px; padding-top: 647px; margin-left: 5621px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">c := l.checks[id]<br />c.Check.Status = status<br />c.Check.Output = output</div></div></div></foreignObject><text x="5621" y="651" fill="#000000" font-family="source code pro" font-size="13px">c := l.checks[id]...</text></switch></g><path d="M 220 417 L 283.63 417" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 288.88 417 L 281.88 420.5 L 283.63 417 L 281.88 413.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 435 417 L 513.63 417" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 518.88 417 L 511.88 420.5 L 513.63 417 L 511.88 413.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1145 417 L 1250.63 417" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1255.88 417 L 1248.88 420.5 L 1250.63 417 L 1248.88 413.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1453 417 L 1533.63 417" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1538.88 417 L 1531.88 420.5 L 1533.63 417 L 1531.88 413.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2110 417 L 2193.63 417" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2198.88 417 L 2191.88 420.5 L 2193.63 417 L 2191.88 413.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2342 417 L 2435.63 417" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.88 417 L 2433.88 420.5 L 2435.63 417 L 2433.88 413.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2921 417 L 2951 417 Q 2961 417 2961 407 L 2961 400.25 Q 2961 393.5 2971 393.5 L 2994.63 393.5" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2999.88 393.5 L 2992.88 397 L 2994.63 393.5 L 2992.88 390 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2342 417 L 2380 417 Q 2390 417 2390 427 L 2390 534 Q 2390 544 2400 544 L 2435.63 544" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2440.88 544 L 2433.88 547.5 L 2435.63 544 L 2433.88 540.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2798 544 L 2871.63 544" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2876.88 544 L 2869.88 547.5 L 2871.63 544 L 2869.88 540.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2966 544 L 3031.63 544" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3036.88 544 L 3029.88 547.5 L 3031.63 544 L 3029.88 540.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3153 544 L 3231.63 544" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3236.88 544 L 3229.88 547.5 L 3231.63 544 L 3229.88 540.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3308 544 L 3381.63 544" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3386.88 544 L 3379.88 547.5 L 3381.63 544 L 3379.88 540.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3725 544 L 3811.63 544" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3816.88 544 L 3809.88 547.5 L 3811.63 544 L 3809.88 540.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3906 544 L 4021.63 544" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 4026.88 544 L 4019.88 547.5 L 4021.63 544 L 4019.88 540.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3906 544 L 3960 544 Q 3970 544 3970 554 L 3970 637 Q 3970 647 3980 647 L 4021.63 647" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 4026.88 647 L 4019.88 650.5 L 4021.63 647 L 4019.88 643.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 4608 647 L 4661.63 647" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 4666.88 647 L 4659.88 650.5 L 4661.63 647 L 4659.88 643.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 4837 647 L 4907.63 647" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 4912.88 647 L 4905.88 650.5 L 4907.63 647 L 4905.88 643.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 5294 647 L 5357.63 647" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 5362.88 647 L 5355.88 650.5 L 5357.63 647 L 5355.88 643.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 5533 647 L 5607.63 647" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 5612.88 647 L 5605.88 650.5 L 5607.63 647 L 5605.88 643.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 591px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">3. 健康检查Http API</div></div></div></foreignObject><text x="32" y="595" fill="#000000" font-family="source code pro" font-size="13px">3. 健康检查Http API</text></switch></g><rect x="30" y="611" width="680" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 673px; height: 1px; padding-top: 641px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">registerEndpoint("/v1/agent/check/register", ..., (*HTTPServer).AgentRegisterCheck)</div></div></div></foreignObject><text x="37" y="645" fill="#000000" font-family="source code pro" font-size="13px">registerEndpoint("/v1/agent/check/register", ..., (*HTTPServer).AgentRegisterCheck)</text></switch></g><rect x="777" y="611" width="220" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 213px; height: 1px; padding-top: 641px; margin-left: 784px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">AgentRegisterCheck(...)</div></div></div></foreignObject><text x="784" y="645" fill="#000000" font-family="source code pro" font-size="13px">AgentRegisterCheck(...)</text></switch></g><rect x="1060" y="593" width="540" height="96" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 533px; height: 1px; padding-top: 641px; margin-left: 1067px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">health := args.HealthCheck(s.agent.config.NodeName)<br />chkType := args.CheckType()<br />s.agent.AddCheck(health, chkType, true, token, ConfigSourceRemote)<br />return nil, nil</div></div></div></foreignObject><text x="1067" y="645" fill="#000000" font-family="source code pro" font-size="13px">health := args.HealthCheck(s.agent.config.NodeName)...</text></switch></g><rect x="1650" y="611" width="142" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 135px; height: 1px; padding-top: 641px; margin-left: 1657px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">AddCheck(...)</div></div></div></foreignObject><text x="1657" y="645" fill="#000000" font-family="source code pro" font-size="13px">AddCheck(...)</text></switch></g><rect x="1860" y="611" width="540" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 533px; height: 1px; padding-top: 641px; margin-left: 1867px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return a.addCheckLocked(check, chkType, persist, token, source)</div></div></div></foreignObject><text x="1867" y="645" fill="#000000" font-family="source code pro" font-size="13px">return a.addCheckLocked(check, chkType, persist, token, source)</text></switch></g><path d="M 710 641 L 770.63 641" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 775.88 641 L 768.88 644.5 L 770.63 641 L 768.88 637.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 997 641 L 1053.63 641" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1058.88 641 L 1051.88 644.5 L 1053.63 641 L 1051.88 637.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1600 641 L 1643.63 641" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1648.88 641 L 1641.88 644.5 L 1643.63 641 L 1641.88 637.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1792 641 L 1853.63 641" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1858.88 641 L 1851.88 644.5 L 1853.63 641 L 1851.88 637.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 45px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 18px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">Consul Health 实现</div></div></div></foreignObject><text x="32" y="50" fill="#000000" font-family="source code pro" font-size="18px">Consul Health 实现</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>
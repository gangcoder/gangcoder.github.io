<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2510px" height="832px" viewBox="-0.5 -0.5 2510 832" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-10-26T14:37:18.468Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.6.5 Chrome/80.0.3987.86 Electron/8.0.0 Safari/537.36&quot; etag=&quot;YMj4q6NDDPL20_O4iuV8&quot; version=&quot;12.6.5&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;oQdzJepucFAt8OODt47I&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-1685-112-715-26-0"><rect x="1685" y="112" width="715" height="26"/></clipPath><clipPath id="mx-clip-1685-138-715-26-0"><rect x="1685" y="138" width="715" height="26"/></clipPath><clipPath id="mx-clip-1685-494-225-26-0"><rect x="1685" y="494" width="225" height="26"/></clipPath><clipPath id="mx-clip-1685-520-225-26-0"><rect x="1685" y="520" width="225" height="26"/></clipPath><clipPath id="mx-clip-1685-546-225-26-0"><rect x="1685" y="546" width="225" height="26"/></clipPath><clipPath id="mx-clip-1685-572-225-26-0"><rect x="1685" y="572" width="225" height="26"/></clipPath></defs><g><path d="M 1680 107 L 1680 75 L 2400 75 L 2400 107" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1680 107 L 1680 159 L 2400 159 L 2400 107" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1680 107 L 2400 107" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="1686.5" y="88">&lt;&lt;interface&gt;&gt;</text><text x="1686.5" y="104">Client</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1685-112-715-26-0)" font-size="13px"><text x="1686.5" y="125.5">+ NewRequest(service, endpoint string, req interface{}, reqOpts ...RequestOption) Request</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1685-138-715-26-0)" font-size="13px"><text x="1686.5" y="151.5">+ Call(ctx context.Context, req Request, rsp interface{}, opts ...CallOption) error</text></g><path d="M 1680 488.5 L 1680 456.5 L 1910 456.5 L 1910 488.5" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1680 488.5 L 1680 592.5 L 1910 592.5 L 1910 488.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1680 488.5 L 1910 488.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="1686.5" y="469.5">&lt;&lt;interface&gt;&gt;</text><text x="1686.5" y="485.5">Request</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1685-494-225-26-0)" font-size="13px"><text x="1686.5" y="507">+ Service() string</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1685-520-225-26-0)" font-size="13px"><text x="1686.5" y="533">+ Method() string</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1685-546-225-26-0)" font-size="13px"><text x="1686.5" y="559">+ Endpoint() string</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1685-572-225-26-0)" font-size="13px"><text x="1686.5" y="585">+ Body() interface{}</text></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 169px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">1. 创建grpc 客户端</div></div></div></foreignObject><text x="32" y="173" fill="#000000" font-family="source code pro" font-size="13px">1. 创建grpc 客户端</text></switch></g><rect x="30" y="190" width="358" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 351px; height: 1px; padding-top: 220px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func NewClient(opts ...client.Option)</div></div></div></foreignObject><text x="37" y="224" fill="#000000" font-family="source code pro" font-size="13px">func NewClient(opts ...client.Option)</text></switch></g><rect x="488" y="190" width="250" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 243px; height: 1px; padding-top: 220px; margin-left: 495px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return newClient(opts...)</div></div></div></foreignObject><text x="495" y="224" fill="#000000" font-family="source code pro" font-size="13px">return newClient(opts...)</text></switch></g><rect x="830" y="190" width="358" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 351px; height: 1px; padding-top: 220px; margin-left: 837px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func newClient(opts ...client.Option)</div></div></div></foreignObject><text x="837" y="224" fill="#000000" font-family="source code pro" font-size="13px">func newClient(opts ...client.Option)</text></switch></g><rect x="1280" y="190" width="304" height="132" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 297px; height: 1px; padding-top: 256px; margin-left: 1287px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">options := client.NewOptions()<br />rc := &amp;grpcClient{<br />    opts: options,<br />}<br />rc.pool = newPool(...)<br />c := client.Client(rc)<br />return c</div></div></div></foreignObject><text x="1287" y="260" fill="#000000" font-family="source code pro" font-size="13px">options := client.NewOptions()...</text></switch></g><rect x="1680" y="226" width="331" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 324px; height: 1px; padding-top: 256px; margin-left: 1687px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func NewOptions(options ...Option)</div></div></div></foreignObject><text x="1687" y="260" fill="#000000" font-family="source code pro" font-size="13px">func NewOptions(options ...Option)</text></switch></g><rect x="2110" y="190" width="369" height="132" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 256px; margin-left: 2117px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">opts := Options{<br />    Lookup:    LookupRoute,<br />    Broker:    http.NewBroker(),<br />    Router:    regRouter.NewRouter(),<br />    Selector:  roundrobin.NewSelector(),<br />}<br />return opts</div></div></div></foreignObject><text x="2117" y="260" fill="#000000" font-family="source code pro" font-size="13px">opts := Options{...</text></switch></g><rect x="1680" y="340" width="178" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 171px; height: 1px; padding-top: 370px; margin-left: 1687px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func newPool(...)</div></div></div></foreignObject><text x="1687" y="374" fill="#000000" font-family="source code pro" font-size="13px">func newPool(...)</text></switch></g><rect x="1958" y="340" width="413" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 406px; height: 1px; padding-top: 400px; margin-left: 1965px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return &amp;pool{<br />    size:       size,<br />    maxStreams: ms,<br />    maxIdle:    idle,<br />    conns:      make(map[string]*streamsPool),<br />}</div></div></div></foreignObject><text x="1965" y="404" fill="#000000" font-family="source code pro" font-size="13px">return &amp;pool{...</text></switch></g><path d="M 388 220 L 481.63 220" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 486.88 220 L 479.88 223.5 L 481.63 220 L 479.88 216.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 738 220 L 823.63 220" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 828.88 220 L 821.88 223.5 L 823.63 220 L 821.88 216.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1188 220 L 1224 220 Q 1234 220 1234 230 L 1234 246 Q 1234 256 1244 256 L 1273.63 256" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1278.88 256 L 1271.88 259.5 L 1273.63 256 L 1271.88 252.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1584 256 L 1673.63 256" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1678.88 256 L 1671.88 259.5 L 1673.63 256 L 1671.88 252.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2011 256 L 2103.63 256" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2108.88 256 L 2101.88 259.5 L 2103.63 256 L 2101.88 252.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1584 256 L 1620 256 Q 1630 256 1630 266 L 1630 360 Q 1630 370 1640 370 L 1673.63 370" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1678.88 370 L 1671.88 373.5 L 1673.63 370 L 1671.88 366.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1858 370 L 1898 370 Q 1908 370 1908 380 L 1908 390 Q 1908 400 1918 400 L 1951.63 400" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1956.88 400 L 1949.88 403.5 L 1951.63 400 L 1949.88 396.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 350px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">2. NewRequest 创建请求体</div></div></div></foreignObject><text x="32" y="354" fill="#000000" font-family="source code pro" font-size="13px">2. NewRequest 创建请求体</text></switch></g><rect x="30" y="370" width="160" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 153px; height: 1px; padding-top: 400px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">NewRequest(...)</div></div></div></foreignObject><text x="37" y="404" fill="#000000" font-family="source code pro" font-size="13px">NewRequest(...)</text></switch></g><rect x="290" y="370" width="640" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 633px; height: 1px; padding-top: 400px; margin-left: 297px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return newGRPCRequest(service, method, req, g.opts.ContentType, reqOpts...)</div></div></div></foreignObject><text x="297" y="404" fill="#000000" font-family="source code pro" font-size="13px">return newGRPCRequest(service, method, req, g.opts.ContentType, reqOpts...)</text></switch></g><rect x="1020" y="370" width="241" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 234px; height: 1px; padding-top: 400px; margin-left: 1027px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func newGRPCRequest(...)</div></div></div></foreignObject><text x="1027" y="404" fill="#000000" font-family="source code pro" font-size="13px">func newGRPCRequest(...)</text></switch></g><rect x="1324" y="340" width="260" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 253px; height: 1px; padding-top: 400px; margin-left: 1331px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return &amp;grpcRequest{<br />    service:     service,<br />    method:      method,<br />    request:     request,<br />    opts:        opts,<br />}</div></div></div></foreignObject><text x="1331" y="404" fill="#000000" font-family="source code pro" font-size="13px">return &amp;grpcRequest{...</text></switch></g><path d="M 190 400 L 283.63 400" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 288.88 400 L 281.88 403.5 L 283.63 400 L 281.88 396.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 930 400 L 1013.63 400" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1018.88 400 L 1011.88 403.5 L 1013.63 400 L 1011.88 396.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1261 400 L 1317.63 400" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1322.88 400 L 1315.88 403.5 L 1317.63 400 L 1315.88 396.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 500px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">3. Call 执行请求</div></div></div></foreignObject><text x="32" y="504" fill="#000000" font-family="source code pro" font-size="13px">3. Call 执行请求</text></switch></g><rect x="30" y="520" width="106" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 99px; height: 1px; padding-top: 550px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Call(...)</div></div></div></foreignObject><text x="37" y="554" fill="#000000" font-family="source code pro" font-size="13px">Call(...)</text></switch></g><rect x="236" y="520" width="414" height="144" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 407px; height: 1px; padding-top: 592px; margin-left: 243px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">gcall := g.call<br />routes, err := g.opts.Lookup(ctx, req, callOpts)<br />next, err := callOpts.Selector.Select(routes)<br />call := func(i int) error {<br />    node := next()<br />    err = gcall(ctx, node, req, rsp, callOpts)<br />    return err<br />}</div></div></div></foreignObject><text x="243" y="596" fill="#000000" font-family="source code pro" font-size="13px">gcall := g.call...</text></switch></g><rect x="236" y="681" width="414" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 407px; height: 1px; padding-top: 741px; margin-left: 243px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">for i := 0; i &lt;= callOpts.Retries; i++ {<br />    go func(i int) {<br />        ch &lt;- call(i)<br />    }(i)<br />}<br />return gerr</div></div></div></foreignObject><text x="243" y="745" fill="#000000" font-family="source code pro" font-size="13px">for i := 0; i &lt;= callOpts.Retries; i++ {...</text></switch></g><rect x="738" y="526" width="106" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 99px; height: 1px; padding-top: 556px; margin-left: 745px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">call(...)</div></div></div></foreignObject><text x="745" y="560" fill="#000000" font-family="source code pro" font-size="13px">call(...)</text></switch></g><rect x="940" y="496" width="430" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 423px; height: 1px; padding-top: 556px; margin-left: 947px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">cc, err := g.pool.getConn(addr, grpcDialOptions...)<br />go func() {<br />    err := cc.Invoke(ctx, methodToGRPC(...)<br />    ch &lt;- microError(err)<br />}()<br />return grr</div></div></div></foreignObject><text x="947" y="560" fill="#000000" font-family="source code pro" font-size="13px">cc, err := g.pool.getConn(addr, grpcDialOptions...)...</text></switch></g><path d="M 136 550 L 170 550 Q 180 550 180 560 L 180 582 Q 180 592 190 592 L 229.63 592" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 234.88 592 L 227.88 595.5 L 229.63 592 L 227.88 588.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 136 550 L 170 550 Q 180 550 180 560 L 180 731 Q 180 741 190 741 L 229.63 741" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 234.88 741 L 227.88 744.5 L 229.63 741 L 227.88 737.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 650 556 L 731.63 556" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 736.88 556 L 729.88 559.5 L 731.63 556 L 729.88 552.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 844 556 L 933.63 556" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 938.88 556 L 931.88 559.5 L 933.63 556 L 931.88 552.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1680 120 L 1642 120 Q 1632 120 1632 130 L 1632 213 Q 1632 223 1622 223 L 1590.37 223" fill="none" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 1585.12 223 L 1592.12 219.5 L 1590.37 223 L 1592.12 226.5 Z" fill="#019ed5" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 1680 501.5 L 1642 501.5 Q 1632 501.5 1632 491.5 L 1632 410 Q 1632 400 1622 400 L 1590.37 400" fill="none" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 1585.12 400 L 1592.12 396.5 L 1590.37 400 L 1592.12 403.5 Z" fill="#019ed5" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 45px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 18px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; font-weight: bold; white-space: nowrap; ">Go-Micro 客户端grpc 实现</div></div></div></foreignObject><text x="32" y="50" fill="#000000" font-family="source code pro" font-size="18px" font-weight="bold">Go-Micro 客户端grpc 实现</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>
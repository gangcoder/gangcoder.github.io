<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2479px" height="1106px" viewBox="-0.5 -0.5 2479 1106" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-02-26T14:48:05.732Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.5.3 Chrome/78.0.3904.130 Electron/7.1.9 Safari/537.36&quot; etag=&quot;UC9qKZr93YwUMrie0lw0&quot; version=&quot;12.5.3&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;lCP4gPCmRIcmElG6rIzz&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-1594-156-372-26-0"><rect x="1594" y="156" width="372" height="26"/></clipPath><clipPath id="mx-clip-1594-182-372-26-0"><rect x="1594" y="182" width="372" height="26"/></clipPath><clipPath id="mx-clip-1594-208-372-26-0"><rect x="1594" y="208" width="372" height="26"/></clipPath><clipPath id="mx-clip-2124-236-252-26-0"><rect x="2124" y="236" width="252" height="26"/></clipPath><clipPath id="mx-clip-2124-262-252-26-0"><rect x="2124" y="262" width="252" height="26"/></clipPath><clipPath id="mx-clip-2124-288-252-26-0"><rect x="2124" y="288" width="252" height="26"/></clipPath></defs><g><path d="M 410 155 L 483.63 155" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 488.88 155 L 481.88 158.5 L 483.63 155 L 481.88 151.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="125" width="390" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 381px; height: 1px; padding-top: 155px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">notifierManager = notifier.NewManager(...)</div></div></div></foreignObject><text x="27" y="159" fill="#000000" font-family="source code pro" font-size="13px">notifierManager = notifier.NewManager(...)</text></switch></g><path d="M 910 155 L 980 155 Q 990 155 990 165 L 990 172.5 Q 990 180 1000 180 L 1063.63 180" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1068.88 180 L 1061.88 183.5 L 1063.63 180 L 1061.88 176.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="490" y="125" width="420" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 411px; height: 1px; padding-top: 155px; margin-left: 497px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">NewManager(o *Options, logger log.Logger) *Manager</div></div></div></foreignObject><text x="497" y="159" fill="#000000" font-family="source code pro" font-size="13px">NewManager(o *Options, logger log.Logger) *Manager</text></switch></g><path d="M 1591.14 139.04 L 1535 139.01 Q 1525 139 1525 146 L 1525 149.5 Q 1525 153 1515 152.92 L 1466.37 152.55" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1461.12 152.51 L 1468.14 149.06 L 1466.37 152.55 L 1468.09 156.06 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><rect x="1070" y="125" width="390" height="110" rx="16.5" ry="16.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 381px; height: 1px; padding-top: 180px; margin-left: 1077px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>n := &amp;Manager{</div><div>    queue:  make([]*Alert, 0, o.QueueCapacity),</div><div>    more:   make(chan struct{}, 1),</div><div>}</div><div><br /></div><div>return n</div></div></div></div></foreignObject><text x="1077" y="184" fill="#000000" font-family="source code pro" font-size="13px">n := &amp;Manager{...</text></switch></g><path d="M 280 350 L 483.63 350" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 488.88 350 L 481.88 353.5 L 483.63 350 L 481.88 346.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="320" width="260" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 251px; height: 1px; padding-top: 350px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">notifier.ApplyConfig(...)</div></div></div></foreignObject><text x="27" y="354" fill="#000000" font-family="source code pro" font-size="13px">notifier.ApplyConfig(...)</text></switch></g><path d="M 410 515 L 553.63 515" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 558.88 515 L 551.88 518.5 L 553.63 515 L 551.88 511.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="485" width="390" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 381px; height: 1px; padding-top: 515px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">notifier.Run(discoveryManagerNotify.SyncCh())</div></div></div></foreignObject><text x="27" y="519" fill="#000000" font-family="source code pro" font-size="13px">notifier.Run(discoveryManagerNotify.SyncCh())</text></switch></g><path d="M 340 924 L 340 935 Q 340 945 350 945 L 581.63 945" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 586.88 945 L 579.88 948.5 L 581.63 945 L 579.88 941.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 39.11 846.02 L 39.02 885 Q 39 895 49 895 L 113.63 895" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 118.88 895 L 111.88 898.5 L 113.63 895 L 111.88 891.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="785" width="490" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 481px; height: 1px; padding-top: 815px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">sendAlerts(s sender, externalURL string) rules.NotifyFunc</div></div></div></foreignObject><text x="27" y="819" fill="#000000" font-family="source code pro" font-size="13px">sendAlerts(s sender, externalURL string) rules.NotifyFunc</text></switch></g><rect x="120" y="865" width="390" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 381px; height: 1px; padding-top: 895px; margin-left: 127px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">func(ctx, expr string, alerts ...*rules.Alert)</div></div></div></foreignObject><text x="127" y="899" fill="#000000" font-family="source code pro" font-size="13px">func(ctx, expr string, alerts ...*rules.Alert)</text></switch></g><path d="M 315 925 L 315 1045 Q 315 1055 325 1055 L 581.13 1055" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 586.38 1055 L 579.38 1058.5 L 581.13 1055 L 579.38 1051.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="587.5" y="875" width="350" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 341px; height: 1px; padding-top: 945px; margin-left: 595px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for _, alert := range alerts {</div><div>    a := &amp;notifier.Alert{</div><div>        StartsAt:     alert.FiredAt,</div><div>        Labels:       alert.Labels,</div><div>        Annotations:  alert.Annotations,</div><div>    }</div><div>    res = append(res, a)</div><div>}</div></div></div></div></foreignObject><text x="595" y="949" fill="#000000" font-family="source code pro" font-size="13px">for _, alert := range alerts {...</text></switch></g><path d="M 817.5 1055 L 1210 1055 Q 1220 1055 1220 1045 L 1220 921.37" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1220 916.12 L 1223.5 923.12 L 1220 921.37 L 1216.5 923.12 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="587.5" y="1025" width="230" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 221px; height: 1px; padding-top: 1055px; margin-left: 595px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">n.Send(res...)</div></div></div></foreignObject><text x="595" y="1059" fill="#000000" font-family="source code pro" font-size="13px">n.Send(res...)</text></switch></g><path d="M 1340 885 L 1513.63 885" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1518.88 885 L 1511.88 888.5 L 1513.63 885 L 1511.88 881.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="1100" y="855" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 231px; height: 1px; padding-top: 885px; margin-left: 1107px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Send(alerts ...*Alert)</div></div></div></foreignObject><text x="1107" y="889" fill="#000000" font-family="source code pro" font-size="13px">Send(alerts ...*Alert)</text></switch></g><path d="M 1280 915 L 1280 955 Q 1280 965 1290 965 L 1513.63 965" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1518.88 965 L 1511.88 968.5 L 1513.63 965 L 1511.88 961.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1840 885 L 2440 885 Q 2450 885 2450 875 L 2450 174 Q 2450 164 2440 164 L 1976.37 164" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1971.12 164 L 1978.12 160.5 L 1976.37 164 L 1978.12 167.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><rect x="1520" y="855" width="320" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 311px; height: 1px; padding-top: 885px; margin-left: 1527px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">n.queue = append(n.queue, alerts...)</div></div></div></foreignObject><text x="1527" y="889" fill="#000000" font-family="source code pro" font-size="13px">n.queue = append(n.queue, alerts...)</text></switch></g><rect x="1520" y="935" width="160" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 151px; height: 1px; padding-top: 965px; margin-left: 1527px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">n.setMore()</div></div></div></foreignObject><text x="1527" y="969" fill="#000000" font-family="source code pro" font-size="13px">n.setMore()</text></switch></g><path d="M 312.5 545 L 312.92 595 Q 313 605 323 605 L 483.63 605" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 488.88 605 L 481.88 608.5 L 483.63 605 L 481.88 601.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 710 515 L 953.63 515" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 958.88 515 L 951.88 518.5 L 953.63 515 L 951.88 511.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="560" y="485" width="150" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 141px; height: 1px; padding-top: 515px; margin-left: 567px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>ts := &lt;-tsets</div><div>n.reload(ts)</div></div></div></div></foreignObject><text x="567" y="519" fill="#000000" font-family="source code pro" font-size="13px">ts := &lt;-tsets...</text></switch></g><path d="M 1260 515 L 1453.63 515" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1458.88 515 L 1451.88 518.5 L 1453.63 515 L 1451.88 511.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="960" y="475" width="300" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 291px; height: 1px; padding-top: 515px; margin-left: 967px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for id, tgroup := range tgs {</div><div>    am, ok := n.alertmanagers[id]</div><div>    am.sync(tgroup)</div><div>}</div></div></div></div></foreignObject><text x="967" y="519" fill="#000000" font-family="source code pro" font-size="13px">for id, tgroup := range tgs {...</text></switch></g><path d="M 1750 515 L 1825 515 Q 1835 515 1835 505 L 1835 424 Q 1835 414 1845 414 L 1913.63 414" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1918.88 414 L 1911.88 417.5 L 1913.63 414 L 1911.88 410.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1750 515 L 1825 515 Q 1835 515 1845 514.98 L 1913.63 514.87" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1918.88 514.86 L 1911.89 518.37 L 1913.63 514.87 L 1911.88 511.37 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="1460" y="485" width="290" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 281px; height: 1px; padding-top: 515px; margin-left: 1467px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">sync(tgs []*targetgroup.Group)</div></div></div></foreignObject><text x="1467" y="519" fill="#000000" font-family="source code pro" font-size="13px">sync(tgs []*targetgroup.Group)</text></switch></g><rect x="1920" y="364" width="500" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 491px; height: 1px; padding-top: 414px; margin-left: 1927px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for _, tg := range tgs {</div><div>    ams, droppedAms, err := alertmanagerFromGroup(tg, s.cfg)</div><div>    allAms = append(allAms, ams...)</div><div>    allDroppedAms = append(allDroppedAms, droppedAms...)</div><div>}</div></div></div></div></foreignObject><text x="1927" y="418" fill="#000000" font-family="source code pro" font-size="13px">for _, tg := range tgs {...</text></switch></g><rect x="1920" y="474" width="260" height="81.71" rx="12.26" ry="12.26" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 251px; height: 1px; padding-top: 515px; margin-left: 1927px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>s.ams = []alertmanager{}</div><div>for _, am := range allAms {</div><div>    s.ams = append(s.ams, am)</div><div>}</div></div></div></div></foreignObject><text x="1927" y="519" fill="#000000" font-family="source code pro" font-size="13px">s.ams = []alertmanager{}...</text></switch></g><path d="M 215 545 L 215 675 Q 215 685 225 685 L 483.63 685" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 488.88 685 L 481.88 688.5 L 483.63 685 L 481.88 681.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 710 605 L 953.63 605" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 958.88 605 L 951.88 608.5 L 953.63 605 L 951.88 601.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="490" y="575" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 211px; height: 1px; padding-top: 605px; margin-left: 497px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">alerts := n.nextBatch()</div></div></div></foreignObject><text x="497" y="609" fill="#000000" font-family="source code pro" font-size="13px">alerts := n.nextBatch()</text></switch></g><path d="M 1440 745 L 1513.63 745" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1518.88 745 L 1511.88 748.5 L 1513.63 745 L 1511.88 741.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="960" y="575" width="510" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 501px; height: 1px; padding-top: 605px; margin-left: 967px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>alerts = append(make([]*Alert, 0, len(n.queue)), n.queue...)</div><div>n.queue = n.queue[:0]</div><div>return alerts</div></div></div></div></foreignObject><text x="967" y="609" fill="#000000" font-family="source code pro" font-size="13px">alerts = append(make([]*Alert, 0, len(n.queue)), n.queue...)...</text></switch></g><path d="M 1840 745 L 1913.63 745" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1918.88 745 L 1911.88 748.5 L 1913.63 745 L 1911.88 741.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="1520" y="715" width="320" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 311px; height: 1px; padding-top: 745px; margin-left: 1527px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">sendOne(ctx, client, url, payload)</div></div></div></foreignObject><text x="1527" y="749" fill="#000000" font-family="source code pro" font-size="13px">sendOne(ctx, client, url, payload)</text></switch></g><rect x="1920" y="715" width="500" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 491px; height: 1px; padding-top: 745px; margin-left: 1927px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>req, err := http.NewRequest("POST", url, bytes.NewReader(b))</div><div>resp, err := n.opts.Do(ctx, c, req)</div></div></div></div></foreignObject><text x="1927" y="749" fill="#000000" font-family="source code pro" font-size="13px">req, err := http.NewRequest("POST", url, bytes.NewReader(b))...</text></switch></g><path d="M 710 685 L 760 685 Q 770 685 770 695 L 770 735 Q 770 745 780 745 L 953.63 745" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 958.88 745 L 951.88 748.5 L 953.63 745 L 951.88 741.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="490" y="655" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 211px; height: 1px; padding-top: 685px; margin-left: 497px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">n.sendAll(alerts...)</div></div></div></foreignObject><text x="497" y="689" fill="#000000" font-family="source code pro" font-size="13px">n.sendAll(alerts...)</text></switch></g><rect x="960" y="655" width="480" height="180" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 471px; height: 1px; padding-top: 745px; margin-left: 967px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>amSets := n.alertmanagers</div><div>for _, ams := range amSets {</div><div>    v1Payload, err = json.Marshal(alerts)</div><div>    payload = v1Payload     </div><div>        </div><div>    for _, am := range ams.ams {</div><div>        go func(ams *alertmanagerSet, am alertmanager) {</div><div>            n.sendOne(ctx, client, url, payload)</div><div>        }(ams.client, am.url().String())</div><div>    }</div><div>}</div></div></div></div></foreignObject><text x="967" y="749" fill="#000000" font-family="source code pro" font-size="13px">amSets := n.alertmanagers...</text></switch></g><path d="M 990 330 L 1213.63 330" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1218.88 330 L 1211.88 333.5 L 1213.63 330 L 1211.88 326.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="490" y="292.5" width="570" height="115" rx="17.25" ry="17.25" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 561px; height: 1px; padding-top: 350px; margin-left: 497px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for k, cfg := range conf.AlertingConfig.AlertmanagerConfigs.ToMap() {</div><div>    ams, err := newAlertmanagerSet(cfg, n.logger, n.metrics)     </div><div>    amSets[k] = ams</div><div>}</div><div><br /></div><div>n.alertmanagers = amSets</div></div></div></div></foreignObject><text x="497" y="354" fill="#000000" font-family="source code pro" font-size="13px">for k, cfg := range conf.AlertingConfig.AlertmanagerConfigs.ToMap() {...</text></switch></g><path d="M 1460 330 L 1643.63 330" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1648.88 330 L 1641.88 333.5 L 1643.63 330 L 1641.88 326.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="1220" y="300" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 231px; height: 1px; padding-top: 330px; margin-left: 1227px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">newAlertmanagerSet(...)</div></div></div></foreignObject><text x="1227" y="334" fill="#000000" font-family="source code pro" font-size="13px">newAlertmanagerSet(...)</text></switch></g><path d="M 2120 231 L 2015 231 Q 2005 231 2005 241 L 2005 293 Q 2005 303 1995 302.96 L 1896.37 302.53" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1891.12 302.5 L 1898.13 299.04 L 1896.37 302.53 L 1898.1 306.04 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><rect x="1650" y="275" width="240" height="110" rx="16.5" ry="16.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 231px; height: 1px; padding-top: 330px; margin-left: 1657px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>s := &amp;alertmanagerSet{</div><div>    client: client,</div><div>    cfg:    cfg,</div><div>    logger: logger,</div><div>}</div><div>return s, nil</div></div></div></div></foreignObject><text x="1657" y="334" fill="#000000" font-family="source code pro" font-size="13px">s := &amp;alertmanagerSet{...</text></switch></g><path d="M 1590 151 L 1590 125 L 1970 125 L 1970 151" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1590 151 L 1590 229 L 1970 229 L 1970 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1590 151 L 1970 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="1596.5" y="143">Manager</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1594-156-372-26-0)" font-size="13px"><text x="1595.5" y="169.5">- queue: []*Alert</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1594-182-372-26-0)" font-size="13px"><text x="1595.5" y="195.5">- more: chan struct{}</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1594-208-372-26-0)" font-size="13px"><text x="1595.5" y="221.5">- alertmanagers: map[string]*alertmanagerSet</text></g><path d="M 2120 231 L 2120 205 L 2380 205 L 2380 231" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2120 231 L 2120 309 L 2380 309 L 2380 231" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2120 231 L 2380 231" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="2126.5" y="223">alertmanagerSet</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2124-236-252-26-0)" font-size="13px"><text x="2125.5" y="249.5">- client: http.Client</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2124-262-252-26-0)" font-size="13px"><text x="2125.5" y="275.5">- ams: []alertmanager</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2124-288-252-26-0)" font-size="13px"><text x="2125.5" y="301.5">- droppedAms: []alertmanager</text></g><path d="M 1970 164 L 1970 169.5 Q 1970 175 1980 175 L 2430 175 Q 2440 175 2440 185 L 2440 595 Q 2440 605 2430 605 L 1476.37 605" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 1471.12 605 L 1478.12 601.5 L 1476.37 605 L 1478.12 608.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 2120 216.02 L 2055 216 Q 2045 216 2035 216 L 1976.37 216" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 1971.12 216 L 1978.12 212.5 L 1976.37 216 L 1978.12 219.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 105px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">1. 创建 notifier 实例</div></div></div></foreignObject><text x="27" y="109" fill="#000000" font-family="source code pro" font-size="13px">1. 创建 notifier 实例</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 299px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">2. 更新 notifier 配置信息</div></div></div></foreignObject><text x="27" y="303" fill="#000000" font-family="source code pro" font-size="13px">2. 更新 notifier 配置信息</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 465px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">3. 运行 notifier 通知逻辑</div></div></div></foreignObject><text x="27" y="469" fill="#000000" font-family="source code pro" font-size="13px">3. 运行 notifier 通知逻辑</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 765px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">4. 发送告警到 notifier</div></div></div></foreignObject><text x="27" y="769" fill="#000000" font-family="source code pro" font-size="13px">4. 发送告警到 notifier</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 309px; margin-left: 1135px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">根据配置创建告警中心</div></div></div></foreignObject><text x="1135" y="313" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">根据配置创建告警中心</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 593px; margin-left: 425px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">获取警报消息</div></div></div></foreignObject><text x="425" y="597" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">获取警报消息</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 668px; margin-left: 383px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">将警报消息发送给所有告警中心</div></div></div></foreignObject><text x="383" y="672" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">将警报消息发送给所有告警中心</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 500px; margin-left: 485px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">更新告警中心节点地址</div></div></div></foreignObject><text x="485" y="504" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">更新告警中心节点地址</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 535px; margin-left: 1855px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">更新节点地址</div></div></div></foreignObject><text x="1855" y="539" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">更新节点地址</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 589px; margin-left: 840px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">从 queue slice 中获取告警消息</div></div></div></foreignObject><text x="840" y="593" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">从 queue slice 中获取告警消息</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 765px; margin-left: 840px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">发送告警到所有告警中心的所有节点</div></div></div></foreignObject><text x="840" y="769" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">发送告警到所有告警中心的所有节点</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1040px; margin-left: 483px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">将告警消息发送给告警通知服务</div></div></div></foreignObject><text x="483" y="1044" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">将告警消息发送给告警通知服务</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 865px; margin-left: 1445px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">将告警存入 queue</div></div></div></foreignObject><text x="1445" y="869" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">将告警存入 queue</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 35px; margin-left: 130px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 18px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">Notifier 告警通知实现</div></div></div></foreignObject><text x="130" y="40" fill="#000000" font-family="source code pro" font-size="18px" text-anchor="middle">Notifier 告警通知实现</text></switch></g></g></svg>
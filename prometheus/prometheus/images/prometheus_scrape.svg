<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="3139px" height="1191px" viewBox="-0.5 -0.5 3139 1191" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-02-26T01:54:39.678Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.5.3 Chrome/78.0.3904.130 Electron/7.1.9 Safari/537.36&quot; etag=&quot;o4sUUo4dzrZxWgUzDG2-&quot; version=&quot;12.5.3&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;DFOeAW-bkF908_AbrL1a&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-1544-161-362-26-0"><rect x="1544" y="161" width="362" height="26"/></clipPath><clipPath id="mx-clip-1544-187-362-26-0"><rect x="1544" y="187" width="362" height="26"/></clipPath><clipPath id="mx-clip-1544-213-362-26-0"><rect x="1544" y="213" width="362" height="26"/></clipPath><clipPath id="mx-clip-2114-161-362-26-0"><rect x="2114" y="161" width="362" height="26"/></clipPath><clipPath id="mx-clip-2114-187-362-26-0"><rect x="2114" y="187" width="362" height="26"/></clipPath><clipPath id="mx-clip-2114-213-362-26-0"><rect x="2114" y="213" width="362" height="26"/></clipPath><clipPath id="mx-clip-2114-239-362-26-0"><rect x="2114" y="239" width="362" height="26"/></clipPath><clipPath id="mx-clip-84-791-197-26-0"><rect x="84" y="791" width="197" height="26"/></clipPath><clipPath id="mx-clip-84-825-197-28-0"><rect x="84" y="825" width="197" height="28"/></clipPath><clipPath id="mx-clip-2364-914-502-26-0"><rect x="2364" y="914" width="502" height="26"/></clipPath><clipPath id="mx-clip-2364-940-502-26-0"><rect x="2364" y="940" width="502" height="26"/></clipPath><clipPath id="mx-clip-2364-966-502-26-0"><rect x="2364" y="966" width="502" height="26"/></clipPath><clipPath id="mx-clip-2364-1031-192-26-0"><rect x="2364" y="1031" width="192" height="26"/></clipPath><clipPath id="mx-clip-2364-1057-192-26-0"><rect x="2364" y="1057" width="192" height="26"/></clipPath><clipPath id="mx-clip-2854-175-202-26-0"><rect x="2854" y="175" width="202" height="26"/></clipPath><clipPath id="mx-clip-2854-201-202-26-0"><rect x="2854" y="201" width="202" height="26"/></clipPath></defs><g><path d="M 370 160 L 443.63 160" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 448.88 160 L 441.88 163.5 L 443.63 160 L 441.88 156.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="130" width="350" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 341px; height: 1px; padding-top: 160px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">scrapeManager = scrape.NewManager(...)</div></div></div></foreignObject><text x="27" y="164" fill="#000000" font-family="source code pro" font-size="13px">scrapeManager = scrape.NewManager(...)</text></switch></g><path d="M 290 400 L 360 400 Q 370 400 370 390 L 370 310 Q 370 300 380 300 L 443.63 300" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 448.88 300 L 441.88 303.5 L 443.63 300 L 441.88 296.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 290 400 L 443.63 400" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 448.88 400 L 441.88 403.5 L 443.63 400 L 441.88 396.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="370" width="270" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 261px; height: 1px; padding-top: 400px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">scrapeManager.ApplyConfig()</div></div></div></foreignObject><text x="27" y="404" fill="#000000" font-family="source code pro" font-size="13px">scrapeManager.ApplyConfig()</text></switch></g><path d="M 440 570 L 513.63 570" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 518.88 570 L 511.88 573.5 L 513.63 570 L 511.88 566.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="540" width="420" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 411px; height: 1px; padding-top: 570px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">scrapeManager.Run(discoveryManagerScrape.SyncCh())</div></div></div></foreignObject><text x="27" y="574" fill="#000000" font-family="source code pro" font-size="13px">scrapeManager.Run(discoveryManagerScrape.SyncCh())</text></switch></g><path d="M 335 600 L 335 640 Q 335 650 345 650 L 513.63 650" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 518.88 650 L 511.88 653.5 L 513.63 650 L 511.88 646.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 690 570 L 793.63 570" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 798.88 570 L 791.88 573.5 L 793.63 570 L 791.88 566.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="520" y="540" width="170" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 161px; height: 1px; padding-top: 570px; margin-left: 527px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">go m.reloader()</div></div></div></foreignObject><text x="527" y="574" fill="#000000" font-family="source code pro" font-size="13px">go m.reloader()</text></switch></g><path d="M 920 570 L 990 570 Q 1000 570 1010 570 L 1071.55 569.98" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1076.8 569.98 L 1069.8 573.48 L 1071.55 569.98 L 1069.8 566.48 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="800" y="540" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 111px; height: 1px; padding-top: 570px; margin-left: 807px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">m.reload()</div></div></div></foreignObject><text x="807" y="574" fill="#000000" font-family="source code pro" font-size="13px">m.reload()</text></switch></g><path d="M 2035 601 L 2163.63 601" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2168.88 601 L 2161.88 604.5 L 2163.63 601 L 2161.88 597.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1966.25 631 L 1966.03 720 Q 1966 730 1976 730 L 2163.63 730" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2168.88 730 L 2161.88 733.5 L 2163.63 730 L 2161.88 726.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1601.04 600.94 L 1670 600.99 Q 1680 601 1690 601 L 1753.63 601" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1758.88 601 L 1751.88 604.5 L 1753.63 601 L 1751.88 597.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1600 577 L 1670 577 Q 1680 577 1680 567 L 1680 473 Q 1680 463 1690 462.94 L 1753.63 462.54" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1758.88 462.51 L 1751.9 466.05 L 1753.63 462.54 L 1751.86 459.05 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="1080" y="532" width="520" height="180" rx="27" ry="27" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 511px; height: 1px; padding-top: 622px; margin-left: 1087px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for setName, groups := range m.targetSets {</div><div>    if _, ok := m.scrapePools[setName]; !ok {</div><div>        sp, err := newScrapePool(scrapeConfig, m.append, ...)</div><div>        m.scrapePools[setName] = sp</div><div>    }</div><div><br /></div><div>    go func(sp *scrapePool, groups []*targetgroup.Group) {</div><div>        sp.Sync(groups)</div><div>    }(m.scrapePools[setName], groups)</div><div>}</div></div></div></div></foreignObject><text x="1087" y="626" fill="#000000" font-family="source code pro" font-size="13px">for setName, groups := range m.targetSets {...</text></switch></g><rect x="2170" y="521" width="429" height="160" rx="24" ry="24" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 420px; height: 1px; padding-top: 601px; margin-left: 2177px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for _, tg := range tgs {</div><div>    targets, err := targetsFromGroup(tg, sp.config)</div><div><br /></div><div>    for _, t := range targets {</div><div>        if t.Labels().Len() &gt; 0 {</div><div>            all = append(all, t)</div><div>        }</div><div>    }</div><div>}</div></div></div></div></foreignObject><text x="2177" y="605" fill="#000000" font-family="source code pro" font-size="13px">for _, tg := range tgs {...</text></switch></g><rect x="2645" y="395" width="410" height="135" rx="20.25" ry="20.25" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 401px; height: 1px; padding-top: 463px; margin-left: 2652px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>sp := &amp;scrapePool{</div><div>    appendable:    app,</div><div>    activeTargets: map[uint64]*Target{},</div><div>}</div><div><br /></div><div>sp.newLoop = func(opts scrapeLoopOptions) loop {</div><div>    return newScrapeLoop(ctx, opts.scraper, ...)</div><div>}</div></div></div></div></foreignObject><text x="2652" y="466" fill="#000000" font-family="source code pro" font-size="13px">sp := &amp;scrapePool{...</text></switch></g><path d="M 2210 337.5 L 2263.63 337.5" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2268.88 337.5 L 2261.88 341 L 2263.63 337.5 L 2261.88 334 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="1760" y="300" width="450" height="75" rx="11.25" ry="11.25" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 441px; height: 1px; padding-top: 338px; margin-left: 1767px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>sp.newLoop = func(opts scrapeLoopOptions) loop {</div><div><span style="white-space: pre">	</span>// ...</div><div><span style="white-space: pre">	</span>return newScrapeLoop(ctx, opts.scraper,... )</div><div>}</div></div></div></div></foreignObject><text x="1767" y="341" fill="#000000" font-family="source code pro" font-size="13px">sp.newLoop = func(opts scrapeLoopOptions) loop {...</text></switch></g><rect x="2270" y="300" width="210" height="75" rx="11.25" ry="11.25" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 201px; height: 1px; padding-top: 338px; margin-left: 2277px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>sl := &amp;scrapeLoop{</div><div>    scraper: sc,</div><div>}</div><div>return sl</div></div></div></div></foreignObject><text x="2277" y="341" fill="#000000" font-family="source code pro" font-size="13px">sl := &amp;scrapeLoop{...</text></switch></g><path d="M 690 650 L 793.63 650" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 798.88 650 L 791.88 653.5 L 793.63 650 L 791.88 646.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="520" y="620" width="170" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 161px; height: 1px; padding-top: 650px; margin-left: 527px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">m.updateTsets(ts)</div></div></div></foreignObject><text x="527" y="654" fill="#000000" font-family="source code pro" font-size="13px">m.updateTsets(ts)</text></switch></g><rect x="800" y="620" width="200" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 191px; height: 1px; padding-top: 650px; margin-left: 807px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">m.targetSets = tsets</div></div></div></foreignObject><text x="807" y="654" fill="#000000" font-family="source code pro" font-size="13px">m.targetSets = tsets</text></switch></g><path d="M 2324 730 L 2638.63 730" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2643.88 730 L 2636.88 733.5 L 2638.63 730 L 2636.88 726.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="2170" y="700" width="154" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 145px; height: 1px; padding-top: 730px; margin-left: 2177px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">sp.sync(all)</div></div></div></foreignObject><text x="2177" y="734" fill="#000000" font-family="source code pro" font-size="13px">sp.sync(all)</text></switch></g><rect x="1760" y="571" width="275" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 266px; height: 1px; padding-top: 601px; margin-left: 1767px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Sync(tgs []*targetgroup.Group)</div></div></div></foreignObject><text x="1767" y="605" fill="#000000" font-family="source code pro" font-size="13px">Sync(tgs []*targetgroup.Group)</text></switch></g><path d="M 2145 462.5 L 2638.63 462.5" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2643.88 462.5 L 2636.88 466 L 2638.63 462.5 L 2636.88 459 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="1760" y="432.5" width="385" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 376px; height: 1px; padding-top: 463px; margin-left: 1767px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">newScrapePool(cfg *config.ScrapeConfig, ...)</div></div></div></foreignObject><text x="1767" y="466" fill="#000000" font-family="source code pro" font-size="13px">newScrapePool(cfg *config.ScrapeConfig, ...)</text></switch></g><path d="M 730 897.33 L 803.63 897.33" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 808.88 897.33 L 801.88 900.83 L 803.63 897.33 L 801.88 893.83 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="100" y="867.33" width="630" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 621px; height: 1px; padding-top: 897px; margin-left: 107px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">func (sl *scrapeLoop) run(interval, timeout time.Duration, errc chan&lt;- error)</div></div></div></foreignObject><text x="107" y="901" fill="#000000" font-family="source code pro" font-size="13px">func (sl *scrapeLoop) run(interval, timeout time.Duration, errc chan&lt;- error)</text></switch></g><path d="M 1700 897.33 L 1745 897.06 Q 1755 897 1765 897 L 1803.63 897" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1808.88 897 L 1801.88 900.5 L 1803.63 897 L 1801.88 893.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1615 927.33 L 1615 970 Q 1615 980 1625 980 L 1803.63 980" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1808.88 980 L 1801.88 983.5 L 1803.63 980 L 1801.88 976.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1300 897.33 L 1353.63 897.33" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1358.88 897.33 L 1351.88 900.83 L 1353.63 897.33 L 1351.88 893.83 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="810" y="867.33" width="490" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 481px; height: 1px; padding-top: 897px; margin-left: 817px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">contentType, scrapeErr := sl.scraper.scrape(scrapeCtx, buf)</div></div></div></foreignObject><text x="817" y="901" fill="#000000" font-family="source code pro" font-size="13px">contentType, scrapeErr := sl.scraper.scrape(scrapeCtx, buf)</text></switch></g><rect x="1360" y="867.33" width="340" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 331px; height: 1px; padding-top: 897px; margin-left: 1367px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="white-space: nowrap">scrape(ctx context.Context, w io.Writer)</span></div></div></div></foreignObject><text x="1367" y="901" fill="#000000" font-family="source code pro" font-size="13px">scrape(ctx context.Context, w io.Writer)</text></switch></g><rect x="1810" y="867.33" width="450" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 441px; height: 1px; padding-top: 897px; margin-left: 1817px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">resp, err := s.client.Do(s.req.WithContext(ctx))</div></div></div></foreignObject><text x="1817" y="901" fill="#000000" font-family="source code pro" font-size="13px">resp, err := s.client.Do(s.req.WithContext(ctx))</text></switch></g><rect x="1810" y="950" width="450" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 441px; height: 1px; padding-top: 980px; margin-left: 1817px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>s.buf = bufio.NewReader(resp.Body)</div><div>s.gzipr, err = gzip.NewReader(s.buf)</div><div>_, err = io.Copy(w, s.gzipr)</div></div></div></div></foreignObject><text x="1817" y="984" fill="#000000" font-family="source code pro" font-size="13px">s.buf = bufio.NewReader(resp.Body)...</text></switch></g><path d="M 730 897 L 760 897 Q 770 897 770 907 L 770 1010 Q 770 1020 780 1020 L 803.63 1020" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 808.88 1020 L 801.88 1023.5 L 803.63 1020 L 801.88 1016.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1380 1020 L 2300 1020 Q 2310 1020 2310 1030 L 2310 1130 Q 2310 1140 2320 1140 L 2353.63 1140" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2358.88 1140 L 2351.88 1143.5 L 2353.63 1140 L 2351.88 1136.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><rect x="810" y="990" width="570" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 561px; height: 1px; padding-top: 1020px; margin-left: 817px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>b = buf.Bytes()</div><div>total, added, seriesAdded, appErr := sl.append(b, contentType, start)</div></div></div></div></foreignObject><text x="817" y="1024" fill="#000000" font-family="source code pro" font-size="13px">b = buf.Bytes()...</text></switch></g><path d="M 1320 1140 L 1370 1140 Q 1380 1140 1380 1130 L 1380 1070 Q 1380 1060 1390 1060 L 1508.63 1060" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1513.88 1060 L 1506.88 1063.5 L 1508.63 1060 L 1506.88 1056.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 572.5 927.33 L 572.98 1130 Q 573 1140 583 1140 L 803.63 1140" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 808.88 1140 L 801.88 1143.5 L 803.63 1140 L 801.88 1136.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1320 1140 L 1508.63 1140" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1513.88 1140 L 1506.88 1143.5 L 1508.63 1140 L 1506.88 1136.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="810" y="1110" width="510" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 501px; height: 1px; padding-top: 1140px; margin-left: 817px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">sl.report(start, time.Since(start), total, added, scrapeErr)</div></div></div></foreignObject><text x="817" y="1144" fill="#000000" font-family="source code pro" font-size="13px">sl.report(start, time.Since(start), total, added, scrapeErr)</text></switch></g><rect x="1515" y="1030" width="630" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 621px; height: 1px; padding-top: 1060px; margin-left: 1522px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">sl.scraper.report(start, duration, err)</div></div></div></foreignObject><text x="1522" y="1064" fill="#000000" font-family="source code pro" font-size="13px">sl.scraper.report(start, duration, err)</text></switch></g><path d="M 2145 1140 L 2353.63 1140" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2358.88 1140 L 2351.88 1143.5 L 2353.63 1140 L 2351.88 1136.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><rect x="1515" y="1110" width="630" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 621px; height: 1px; padding-top: 1140px; margin-left: 1522px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>app := sl.appender()</div><div>sl.addReportSample(app, scrapeHealthMetricName, ts, health)</div><div>return app.Commit()</div></div></div></div></foreignObject><text x="1522" y="1144" fill="#000000" font-family="source code pro" font-size="13px">app := sl.appender()...</text></switch></g><rect x="2360" y="1110" width="575" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 566px; height: 1px; padding-top: 1140px; margin-left: 2367px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>localStorage  = &amp;tsdb.ReadyStorage{}</div><div>remoteStorage = remote.NewStorage(...)</div><div>fanoutStorage = storage.NewFanout(logger, localStorage, remoteStorage)</div></div></div></div></foreignObject><text x="2367" y="1144" fill="#000000" font-family="source code pro" font-size="13px">localStorage  = &amp;tsdb.ReadyStorage{}...</text></switch></g><path d="M 3065 730 L 3075 730 Q 3085 730 3085 720 L 3085 219 Q 3085 209 3075.68 209 L 3066.37 209" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3061.12 209 L 3068.12 205.5 L 3066.37 209 L 3068.12 212.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><rect x="2645" y="550" width="420" height="240" rx="14.4" ry="14.4" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 411px; height: 1px; padding-top: 670px; margin-left: 2652px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for _, t := range targets {</div><div>    hash := t.hash()</div><div>    if _, ok := sp.activeTargets[hash]; !ok {</div><div>        s := &amp;targetScraper{Target: t, ...}</div><div>        l := sp.newLoop(scrapeLoopOptions{</div><div>            target:          t,</div><div>            scraper:         s,</div><div>        })</div><div><br /></div><div>        <span>sp.activeTargets[hash] = t</span></div><div>        sp.loops[hash] = l</div><div>        go l.run(interval, timeout, nil)</div><div>    }</div><div>}</div></div></div></div></foreignObject><text x="2652" y="674" fill="#000000" font-family="source code pro" font-size="13px">for _, t := range targets {...</text></switch></g><path d="M 920 160 L 950 160 Q 960 160 960 170 L 960 175 Q 960 180 970 180 L 993.63 180" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 998.88 180 L 991.88 183.5 L 993.63 180 L 991.88 176.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="450" y="130" width="470" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 461px; height: 1px; padding-top: 160px; margin-left: 457px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">NewManager(logger log.Logger, app Appendable) *Manager</div></div></div></foreignObject><text x="457" y="164" fill="#000000" font-family="source code pro" font-size="13px">NewManager(logger log.Logger, app Appendable) *Manager</text></switch></g><path d="M 1540 142.27 L 1525 142.11 Q 1515 142 1515 152 L 1515 170 Q 1515 180 1505.68 180 L 1496.37 180" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1491.12 180 L 1498.12 176.5 L 1496.37 180 L 1498.12 183.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><rect x="1000" y="130" width="490" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 481px; height: 1px; padding-top: 180px; margin-left: 1007px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>return &amp;Manager{</div><div>    append:        app,</div><div>    scrapeConfigs: make(map[string]*config.ScrapeConfig),</div><div>    scrapePools:   make(map[string]*scrapePool),</div><div>}</div></div></div></div></foreignObject><text x="1007" y="184" fill="#000000" font-family="source code pro" font-size="13px">return &amp;Manager{...</text></switch></g><rect x="450" y="250" width="350" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 341px; height: 1px; padding-top: 300px; margin-left: 457px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for _, scfg := range cfg.ScrapeConfigs {</div><div>    c[scfg.JobName] = scfg</div><div>}</div><div><br /></div><div>m.scrapeConfigs = c</div></div></div></div></foreignObject><text x="457" y="304" fill="#000000" font-family="source code pro" font-size="13px">for _, scfg := range cfg.ScrapeConfigs {...</text></switch></g><path d="M 800 400 L 993.63 400" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 998.88 400 L 991.88 403.5 L 993.63 400 L 991.88 396.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="450" y="370" width="350" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 341px; height: 1px; padding-top: 400px; margin-left: 457px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for name, sp := range m.scrapePools {</div><div><span>    sp.reload(cfg)</span></div><div>}</div></div></div></div></foreignObject><text x="457" y="404" fill="#000000" font-family="source code pro" font-size="13px">for name, sp := range m.scrapePools {...</text></switch></g><path d="M 1600 337.5 L 1753.63 337.5" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1758.88 337.5 L 1751.88 341 L 1753.63 337.5 L 1751.88 334 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="1000" y="280" width="600" height="230" rx="16.1" ry="16.1" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 591px; height: 1px; padding-top: 395px; margin-left: 1007px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>for fp, oldLoop := range sp.loops {</div><div>    var (</div><div>        t = sp.activeTargets[fp]</div><div>        s = &amp;targetScraper{Target: t, client: sp.client, timeout: timeout}</div><div>        newLoop = sp.newLoop(scrapeLoopOptions{target: t, scraper: s, ...})</div><div>    )</div><div><br /></div><div>    go func(oldLoop, newLoop loop) {</div><div>        oldLoop.stop()</div><div>        go newLoop.run(interval, timeout, nil)</div><div>    }(oldLoop, newLoop)</div><div><br /></div><div>    sp.loops[fp] = newLoop</div><div>}</div></div></div></div></foreignObject><text x="1007" y="399" fill="#000000" font-family="source code pro" font-size="13px">for fp, oldLoop := range sp.loops {...</text></switch></g><path d="M 1540 156 L 1540 130 L 1910 130 L 1910 156" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1540 156 L 1540 234 L 1910 234 L 1910 156" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1540 156 L 1910 156" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="1546.5" y="148">Manager</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1544-161-362-26-0)" font-size="13px"><text x="1545.5" y="174.5">+ append: Appendable </text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1544-187-362-26-0)" font-size="13px"><text x="1545.5" y="200.5">+ scrapePools: map[string]*scrapePool </text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1544-213-362-26-0)" font-size="13px"><text x="1545.5" y="226.5">+ targetSets: map[string][]*targetgroup.Group </text></g><path d="M 2110 156 L 2110 130 L 2480 130 L 2480 156" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2110 156 L 2110 260 L 2480 260 L 2480 156" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2110 156 L 2480 156" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="2116.5" y="148">scrapePool</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2114-161-362-26-0)" font-size="13px"><text x="2115.5" y="174.5">+ appendable: Appendable</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2114-187-362-26-0)" font-size="13px"><text x="2115.5" y="200.5">+ activeTargets: map[uint64]*Target</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2114-213-362-26-0)" font-size="13px"><text x="2115.5" y="226.5">+ loops: map[uint64]loop</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2114-239-362-26-0)" font-size="13px"><text x="2115.5" y="252.5">+ newLoop: func(*Target, scraper, ...) loop</text></g><path d="M 285 816 L 285 818 Q 285 820 295 820 L 3100 820 Q 3110 820 3110 810 L 3110 163 Q 3110 153 3100 153 L 3066.37 153" fill="none" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 3061.12 153 L 3068.12 149.5 L 3066.37 153 L 3068.12 156.5 Z" fill="#019ed5" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 786 L 80 760 L 285 760 L 285 786" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 786 L 80 848 L 285 848 L 285 786" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 786 L 285 786" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="86.5" y="778">scrapeLoop</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-84-791-197-26-0)" font-size="13px"><text x="85.5" y="804.5">+ scraper: scraper</text></g><path d="M 80 816 L 285 816" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-84-825-197-28-0)" font-size="13px"><text x="85.5" y="838.5">+ run(interval, ...)</text></g><path d="M 2487.5 867.33 L 2487.75 857 Q 2488 847 2478 847 L 1540 847 Q 1530 847 1530 853.98 L 1530 860.96" fill="none" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 1530 866.21 L 1526.5 859.21 L 1530 860.96 L 1533.5 859.21 Z" fill="#019ed5" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 2360 909.33 L 2360 867.33 L 2870 867.33 L 2870 909.33" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2360 909.33 L 2360 987.33 L 2870 987.33 L 2870 909.33" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2360 909.33 L 2870 909.33" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="2361.5" y="885.33">&lt;&lt;interface&gt;&gt;</text><text x="2361.5" y="901.33">scraper</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2364-914-502-26-0)" font-size="13px"><text x="2365.5" y="927.83">+ scrape(ctx context.Context, w io.Writer) (string, error)</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2364-940-502-26-0)" font-size="13px"><text x="2365.5" y="953.83">+ report(start time.Time, dur time.Duration, err error)</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2364-966-502-26-0)" font-size="13px"><text x="2365.5" y="979.83">+ offset(interval time.Duration) time.Duration</text></g><path d="M 2360 1026 L 2360 1000 L 2560 1000 L 2560 1026" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2360 1026 L 2360 1078 L 2560 1078 L 2560 1026" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2360 1026 L 2560 1026" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="2361.5" y="1018">targetScraper</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2364-1031-192-26-0)" font-size="13px"><text x="2365.5" y="1044.5">- *Target</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2364-1057-192-26-0)" font-size="13px"><text x="2365.5" y="1070.5">- client: *http.Client</text></g><path d="M 2110.37 142.61 L 2020 142.96 Q 2010 143 2010 153 L 2010 185 Q 2010 195 2000 195 L 1916.37 195" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 1911.12 195 L 1918.12 191.5 L 1916.37 195 L 1918.12 198.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 2850 153 L 2675 153 Q 2665 153 2665 163 L 2665 211 Q 2665 221 2655 221 L 2486.37 221" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 2481.12 221 L 2488.12 217.5 L 2486.37 221 L 2488.12 224.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 3060 170 L 3060 130 Q 3060 130 3060 130 L 2850 130 Q 2850 130 2850 130 L 2850 170" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2850 170 L 2850 222 Q 2850 222 2850 222 L 3060 222 Q 3060 222 3060 222 L 3060 170" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2850 170 L 3060 170" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="2851.5" y="147">&lt;&lt;interface&gt;&gt;</text><text x="2851.5" y="163">loop</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2854-175-202-26-0)" font-size="13px"><text x="2855.5" y="188.5">+ run(interval, ...)</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2854-201-202-26-0)" font-size="13px"><text x="2855.5" y="214.5">+ stop()</text></g><path d="M 2480 247 L 2840 247 Q 2850 247 2850 257 L 2850 388.63" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 2850 393.88 L 2846.5 386.88 L 2850 388.63 L 2853.5 386.88 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 80 834 L 70 834 Q 60 834 60 844 L 60 887 Q 60 897 70 897.08 L 93.63 897.28" fill="none" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 98.88 897.32 L 91.85 900.76 L 93.63 897.28 L 91.91 893.76 Z" fill="#019ed5" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 2360 948.33 L 2350 948.16 Q 2340 948 2340 958 L 2340 1003 Q 2340 1013 2346.82 1013.01 L 2353.63 1013.02" fill="none" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 2358.88 1013.02 L 2351.88 1016.52 L 2353.63 1013.02 L 2351.89 1009.52 Z" fill="#019ed5" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 110px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; "><font style="font-size: 13px">1. 创建scrape 实例</font></div></div></div></foreignObject><text x="27" y="114" fill="#000000" font-family="source code pro" font-size="13px">1. 创建scrape 实例</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 350px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; "><font style="font-size: 13px">2. 载入scrape 配置</font></div></div></div></foreignObject><text x="27" y="354" fill="#000000" font-family="source code pro" font-size="13px">2. 载入scrape 配置</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 520px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; "><font style="font-size: 13px">3. 运行scrape 抓取逻辑</font></div></div></div></foreignObject><text x="27" y="524" fill="#000000" font-family="source code pro" font-size="13px">3. 运行scrape 抓取逻辑</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 212px; margin-left: 1932px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">抓取实例有多个抓取Pool</div></div></div></foreignObject><text x="1932" y="216" fill="#000000" font-family="source code pro" font-size="13px">抓取实例有多个抓取Pool</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 200px; margin-left: 2585px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">Pool 有多个抓取Loop</div></div></div></foreignObject><text x="2585" y="204" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">Pool 有多个抓取Loop</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 800px; margin-left: 375px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">循环抓取一台目标机器数据</div></div></div></foreignObject><text x="375" y="804" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">循环抓取一台目标机器数据</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 240px; margin-left: 1932px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">Pool 以Job 分组</div></div></div></foreignObject><text x="1932" y="244" fill="#000000" font-family="source code pro" font-size="13px">Pool 以Job 分组</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 285px; margin-left: 385px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">更新抓取配置</div></div></div></foreignObject><text x="385" y="289" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">更新抓取配置</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 420px; margin-left: 385px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">重启抓取任务</div></div></div></foreignObject><text x="385" y="424" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">重启抓取任务</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-end; width: 1px; height: 1px; padding-top: 364px; margin-left: 989px;"><div style="box-sizing: border-box; font-size: 0; text-align: right; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">停止运行所有loop<br /><div><span>根据配置重新启动新的loop</span></div></div></div></div></foreignObject><text x="989" y="368" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="end">停止运行所有loop...</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 670px; margin-left: 424px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">更新targets 列表</div></div></div></foreignObject><text x="424" y="674" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">更新targets 列表</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 550px; margin-left: 1000px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">为job 创建Pool</div></div></div></foreignObject><text x="1000" y="554" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">为job 创建Pool</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 590px; margin-left: 1010px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">运行抓取Pool</div></div></div></foreignObject><text x="1010" y="594" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">运行抓取Pool</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 714px; margin-left: 2536px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">为每台目标机器创建loop</div></div></div></foreignObject><text x="2536" y="718" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">为每台目标机器创建loop</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 750px; margin-left: 2566px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">运行抓取循环</div></div></div></foreignObject><text x="2566" y="754" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">运行抓取循环</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 949px; margin-left: 807px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">抓取数据</div></div></div></foreignObject><text x="807" y="953" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">抓取数据</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1073px; margin-left: 805px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">数据写入到存储tsdb</div></div></div></foreignObject><text x="805" y="1077" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">数据写入到存储tsdb</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1120px; margin-left: 755px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">记录抓取统计</div></div></div></foreignObject><text x="755" y="1124" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">记录抓取统计</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 917px; margin-left: 1753px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">发起http 抓取</div></div></div></foreignObject><text x="1753" y="921" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">发起http 抓取</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1119px; margin-left: 2250px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">指标数据写入tsdb</div></div></div></foreignObject><text x="2250" y="1123" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">指标数据写入tsdb</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1010px; margin-left: 2610px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">抓取对象</div></div></div></foreignObject><text x="2610" y="1014" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">抓取对象</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 35px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 18px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">Scrape 抓取服务实现</div></div></div></foreignObject><text x="27" y="40" fill="#000000" font-family="source code pro" font-size="18px">Scrape 抓取服务实现</text></switch></g></g></svg>
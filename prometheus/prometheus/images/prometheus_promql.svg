<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="3252px" height="961px" viewBox="-0.5 -0.5 3252 961" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-03-08T03:04:07.732Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.5.3 Chrome/78.0.3904.130 Electron/7.1.9 Safari/537.36&quot; etag=&quot;RZbr0kO609A77M0bR7Zt&quot; version=&quot;12.5.3&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;TfHyNT2TzbPG-RLCbY6o&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-1209-191-211-26-0"><rect x="1209" y="191" width="211" height="26"/></clipPath><clipPath id="mx-clip-1209-217-211-26-0"><rect x="1209" y="217" width="211" height="26"/></clipPath><clipPath id="mx-clip-669-690-301-26-0"><rect x="669" y="690" width="301" height="26"/></clipPath><clipPath id="mx-clip-669-716-301-26-0"><rect x="669" y="716" width="301" height="26"/></clipPath><clipPath id="mx-clip-2469-435-271-26-0"><rect x="2469" y="435" width="271" height="26"/></clipPath><clipPath id="mx-clip-2469-461-271-26-0"><rect x="2469" y="461" width="271" height="26"/></clipPath><clipPath id="mx-clip-2469-487-271-26-0"><rect x="2469" y="487" width="271" height="26"/></clipPath><clipPath id="mx-clip-2469-513-271-26-0"><rect x="2469" y="513" width="271" height="26"/></clipPath><clipPath id="mx-clip-2470-269-221-26-0"><rect x="2470" y="269" width="221" height="26"/></clipPath><clipPath id="mx-clip-2470-295-221-26-0"><rect x="2470" y="295" width="221" height="26"/></clipPath><clipPath id="mx-clip-2470-321-221-26-0"><rect x="2470" y="321" width="221" height="26"/></clipPath><clipPath id="mx-clip-2470-347-221-26-0"><rect x="2470" y="347" width="221" height="26"/></clipPath><clipPath id="mx-clip-2470-373-221-26-0"><rect x="2470" y="373" width="221" height="26"/></clipPath><clipPath id="mx-clip-1369-749-211-26-0"><rect x="1369" y="749" width="211" height="26"/></clipPath><clipPath id="mx-clip-1369-775-211-26-0"><rect x="1369" y="775" width="211" height="26"/></clipPath><clipPath id="mx-clip-1369-801-211-26-0"><rect x="1369" y="801" width="211" height="26"/></clipPath></defs><g><path d="M 1204 186 L 1204 160 L 1424 160 L 1424 186" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1204 186 L 1204 238 L 1424 238 L 1424 186" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1204 186 L 1424 186" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="1210.5" y="178">Engine</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1209-191-211-26-0)" font-size="13px"><text x="1210.5" y="204.5">- timeout: time.Duration</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1209-217-211-26-0)" font-size="13px"><text x="1210.5" y="230.5">- gate: *gate.Gate</text></g><path d="M 664 667.25 L 654 667.54 Q 644 667.82 644 657.82 L 644 459 Q 644 449 650.82 449 L 657.63 449" fill="none" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 662.88 449 L 655.88 452.5 L 657.63 449 L 655.88 445.5 Z" fill="#019ed5" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 664 685 L 664 644 L 974 644 L 974 685" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 664 685 L 664 737 L 974 737 L 974 685" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 664 685 L 974 685" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="670.5" y="661.5">&lt;&lt;interface&gt;&gt;</text><text x="670.5" y="677.5">Query</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-669-690-301-26-0)" font-size="13px"><text x="670.5" y="703.5">+ Exec(ctx context.Context): *Result</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-669-716-301-26-0)" font-size="13px"><text x="670.5" y="729.5">+ Statement(): Statement</text></g><path d="M 2464 430 L 2464 404 L 2744 404 L 2744 430" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2464 430 L 2464 534 L 2744 534 L 2744 430" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2464 430 L 2744 430" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="2470.5" y="422">query</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2469-435-271-26-0)" font-size="13px"><text x="2470.5" y="448.5">- queryable: storage.Queryable</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2469-461-271-26-0)" font-size="13px"><text x="2470.5" y="474.5">- q: string</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2469-487-271-26-0)" font-size="13px"><text x="2470.5" y="500.5">- stmt: Statement</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2469-513-271-26-0)" font-size="13px"><text x="2470.5" y="526.5">- ng: *Engine</text></g><path d="M 2465 264 L 2465 238 L 2695 238 L 2695 264" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2465 264 L 2465 394 L 2695 394 L 2695 264" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2465 264 L 2695 264" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="2471.5" y="256">EvalStmt</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2470-269-221-26-0)" font-size="13px"><text x="2471.5" y="282.5">- Expr: Expr</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2470-295-221-26-0)" font-size="13px"><text x="2471.5" y="308.5">- Start: time.Time</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2470-321-221-26-0)" font-size="13px"><text x="2471.5" y="334.5">- End: time.Time</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2470-347-221-26-0)" font-size="13px"><text x="2471.5" y="360.5">- Interval: time.Duration</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2470-373-221-26-0)" font-size="13px"><text x="2471.5" y="386.5">}</text></g><path d="M 1584 744 L 1689.29 744.27 Q 1699.29 744.29 1709.29 744.27 L 1807.63 744.02" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 1812.88 744 L 1805.89 747.52 L 1807.63 744.02 L 1805.87 740.52 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 1364 744 L 1364 718 L 1584 718 L 1584 744" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1364 744 L 1364 822 L 1584 822 L 1584 744" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1364 744 L 1584 744" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="1370.5" y="736">evaluator</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1369-749-211-26-0)" font-size="13px"><text x="1370.5" y="762.5">- startTimestamp: int64</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1369-775-211-26-0)" font-size="13px"><text x="1370.5" y="788.5">- endTimestamp: int64</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1369-801-211-26-0)" font-size="13px"><text x="1370.5" y="814.5">- interval: int64</text></g><path d="M 334 188 L 437.63 188" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 442.88 188 L 435.88 191.5 L 437.63 188 L 435.88 184.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="24" y="158" width="310" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 301px; height: 1px; padding-top: 188px; margin-left: 31px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">queryEngine = promql.NewEngine(opts)</div></div></div></foreignObject><text x="31" y="192" fill="#000000" font-family="source code pro" font-size="13px">queryEngine = promql.NewEngine(opts)</text></switch></g><path d="M 754 188 L 857.63 188" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 862.88 188 L 855.88 191.5 L 857.63 188 L 855.88 184.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="444" y="158" width="310" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 301px; height: 1px; padding-top: 188px; margin-left: 451px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">NewEngine(opts EngineOpts) *Engine</div></div></div></foreignObject><text x="451" y="192" fill="#000000" font-family="source code pro" font-size="13px">NewEngine(opts EngineOpts) *Engine</text></switch></g><rect x="864" y="158" width="270" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 261px; height: 1px; padding-top: 188px; margin-left: 871px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 13px">return &amp;Engine{</div><div style="font-size: 13px">    timeout: opts.Timeout,</div><div style="font-size: 13px">}</div></div></div></div></foreignObject><text x="871" y="192" fill="#000000" font-family="source code pro" font-size="13px">return &amp;Engine{...</text></switch></g><path d="M 64.18 322.98 L 64.04 354.29 Q 64 364.29 74 364.22 L 97.63 364.05" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 102.88 364.01 L 95.91 367.56 L 97.63 364.05 L 95.86 360.56 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="24" y="264" width="410" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 401px; height: 1px; padding-top: 294px; margin-left: 31px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">rules.EngineQueryFunc(queryEngine, fanoutStorage)</div></div></div></foreignObject><text x="31" y="298" fill="#000000" font-family="source code pro" font-size="13px">rules.EngineQueryFunc(queryEngine, fanoutStorage)</text></switch></g><path d="M 574 364 L 657.63 364" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 662.88 364 L 655.88 367.5 L 657.63 364 L 655.88 360.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="104" y="334" width="470" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 461px; height: 1px; padding-top: 364px; margin-left: 111px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">QueryFunc func(ctx context.Context, q string, t time.Time)</div></div></div></foreignObject><text x="111" y="368" fill="#000000" font-family="source code pro" font-size="13px">QueryFunc func(ctx context.Context, q string, t time.Time)</text></switch></g><path d="M 574.59 364.29 L 584.59 364.29 Q 594.59 364.29 594.59 374.29 L 594.59 423.71 Q 594.59 433.71 604.59 433.71 L 657.63 433.71" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 662.88 433.71 L 655.88 437.21 L 657.63 433.71 L 655.88 430.21 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1014 364 L 1057.63 364" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1062.88 364 L 1055.88 367.5 L 1057.63 364 L 1055.88 360.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="664" y="334" width="350" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 341px; height: 1px; padding-top: 364px; margin-left: 671px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">q, err := engine.NewInstantQuery(q, qs, t)</div></div></div></foreignObject><text x="671" y="368" fill="#000000" font-family="source code pro" font-size="13px">q, err := engine.NewInstantQuery(q, qs, t)</text></switch></g><path d="M 1564 364 L 1657.63 364" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1662.88 364 L 1655.88 367.5 L 1657.63 364 L 1655.88 360.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="1064" y="334" width="500" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 491px; height: 1px; padding-top: 364px; margin-left: 1071px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">NewInstantQuery(q storage.Queryable, qs string, ts time.Time)</div></div></div></foreignObject><text x="1071" y="368" fill="#000000" font-family="source code pro" font-size="13px">NewInstantQuery(q storage.Queryable, qs string, ts time.Time)</text></switch></g><path d="M 2004 364.29 L 2044.59 364.29 Q 2054.59 364.29 2054.59 374.29 L 2054.59 543.71 Q 2054.59 553.71 2064.59 553.77 L 2097.63 553.96" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2102.88 553.99 L 2095.86 557.45 L 2097.63 553.96 L 2095.9 550.45 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2004 364.29 L 2044.59 364.29 Q 2054.59 364.29 2064.59 364.25 L 2097.63 364.09" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2102.88 364.07 L 2095.9 367.6 L 2097.63 364.09 L 2095.87 360.6 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="1664" y="334" width="340" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 331px; height: 1px; padding-top: 364px; margin-left: 1671px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">qry := ng.newQuery(q, expr, ts, ts, 0)</div></div></div></foreignObject><text x="1671" y="368" fill="#000000" font-family="source code pro" font-size="13px">qry := ng.newQuery(q, expr, ts, ts, 0)</text></switch></g><rect x="2104" y="334" width="320" height="180" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 311px; height: 1px; padding-top: 424px; margin-left: 2111px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 13px">es := &amp;EvalStmt{</div><div style="font-size: 13px">    Expr:     expr,</div><div style="font-size: 13px">}</div><div style="font-size: 13px">qry := &amp;query{</div><div style="font-size: 13px">    stmt:      es,</div><div style="font-size: 13px">    ng:        ng,</div><div style="font-size: 13px">    stats:     stats.NewQueryTimers(),</div><div style="font-size: 13px">    queryable: q,</div><div style="font-size: 13px">}</div><div style="font-size: 13px">return qry</div></div></div></div></foreignObject><text x="2111" y="428" fill="#000000" font-family="source code pro" font-size="13px">es := &amp;EvalStmt{...</text></switch></g><rect x="2104" y="524" width="145" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 136px; height: 1px; padding-top: 554px; margin-left: 2111px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return qry, nil</div></div></div></foreignObject><text x="2111" y="558" fill="#000000" font-family="source code pro" font-size="13px">return qry, nil</text></switch></g><path d="M 574.59 364.29 L 584.59 364.29 Q 594.59 364.29 594.59 374.29 L 594.59 494.29 Q 594.59 504.29 604.59 504.29 L 657.63 504.29" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 662.88 504.29 L 655.88 507.79 L 657.63 504.29 L 655.88 500.79 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 904 434 L 1057.63 434" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1062.88 434 L 1055.88 437.5 L 1057.63 434 L 1055.88 430.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="664" y="404" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 231px; height: 1px; padding-top: 434px; margin-left: 671px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">res := q.Exec(ctx)</div></div></div></foreignObject><text x="671" y="438" fill="#000000" font-family="source code pro" font-size="13px">res := q.Exec(ctx)</text></switch></g><rect x="1064" y="404" width="480" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 471px; height: 1px; padding-top: 434px; margin-left: 1071px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 13px">res, warnings, err := q.ng.exec(ctx, q)</div><div style="font-size: 13px">return &amp;Result{Err: err, Value: res, Warnings: warnings}</div></div></div></div></foreignObject><text x="1071" y="438" fill="#000000" font-family="source code pro" font-size="13px">res, warnings, err := q.ng.exec(ctx, q)...</text></switch></g><path d="M 1494 579 L 1527.63 579" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1532.88 579 L 1525.88 582.5 L 1527.63 579 L 1525.88 575.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1146.5 534 L 1146.39 569.59 Q 1146.35 579.59 1156.35 579.38 L 1167.63 579.14" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1172.88 579.02 L 1165.96 582.67 L 1167.63 579.14 L 1165.81 575.67 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="1174" y="544" width="320" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 311px; height: 1px; padding-top: 579px; margin-left: 1181px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 13px">switch s := q.Statement().(type) {</div><div style="font-size: 13px">case *EvalStmt:</div><div style="font-size: 13px">    return ng.execEvalStmt(ctx, q, s)</div><div style="font-size: 13px">}</div></div></div></div></foreignObject><text x="1181" y="583" fill="#000000" font-family="source code pro" font-size="13px">switch s := q.Statement().(type) {...</text></switch></g><path d="M 1084 464 L 1084 494.29 Q 1084 504.29 1090.82 504.29 L 1097.63 504.29" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1102.88 504.29 L 1095.88 507.79 L 1097.63 504.29 L 1095.88 500.79 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="1104" y="474" width="170" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 161px; height: 1px; padding-top: 504px; margin-left: 1111px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>q.ng.exec(ctx, q)<br /></div></div></div></div></foreignObject><text x="1111" y="508" fill="#000000" font-family="source code pro" font-size="13px">q.ng.exec(ctx, q)&#xa;</text></switch></g><path d="M 1779.29 614 L 1779.29 754.29 Q 1779.29 764.29 1789.29 764.29 L 1808.22 764.29" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1813.47 764.29 L 1806.47 767.79 L 1808.22 764.29 L 1806.47 760.79 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="1534" y="544" width="490" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 481px; height: 1px; padding-top: 579px; margin-left: 1541px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">execEvalStmt(ctx context.Context, query *query, s *EvalStmt)</div></div></div></foreignObject><text x="1541" y="583" fill="#000000" font-family="source code pro" font-size="13px">execEvalStmt(ctx context.Context, query *query, s *EvalStmt)</text></switch></g><path d="M 1779.29 613.71 L 1779.29 839 Q 1779.29 849 1789.29 849 L 1807.63 849" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1812.88 849 L 1805.88 852.5 L 1807.63 849 L 1805.88 845.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="1814" y="724" width="290" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 281px; height: 1px; padding-top: 764px; margin-left: 1821px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 13px">evaluator := &amp;evaluator{</div><div style="font-size: 13px">    startTimestamp:      start,</div><div style="font-size: 13px">    endTimestamp:        start,</div><div style="font-size: 13px">    interval:            1,</div><div style="font-size: 13px">}</div></div></div></div></foreignObject><text x="1821" y="768" fill="#000000" font-family="source code pro" font-size="13px">evaluator := &amp;evaluator{...</text></switch></g><path d="M 1779 614 L 1779.28 903.71 Q 1779.29 913.71 1789.29 913.79 L 1807.63 913.95" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1812.88 913.99 L 1805.85 917.43 L 1807.63 913.95 L 1805.91 910.43 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2144 844 L 2517.63 844" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2522.88 844 L 2515.88 847.5 L 2517.63 844 L 2515.88 840.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="1814" y="814" width="330" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 321px; height: 1px; padding-top: 844px; margin-left: 1821px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">val, err := evaluator.Eval(s.Expr)</div></div></div></foreignObject><text x="1821" y="848" fill="#000000" font-family="source code pro" font-size="13px">val, err := evaluator.Eval(s.Expr)</text></switch></g><rect x="2524" y="814" width="230" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 221px; height: 1px; padding-top: 844px; margin-left: 2531px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return ev.eval(expr), nil</div></div></div></foreignObject><text x="2531" y="848" fill="#000000" font-family="source code pro" font-size="13px">return ev.eval(expr), nil</text></switch></g><path d="M 2434 659 L 2477.63 659" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2482.88 659 L 2475.88 662.5 L 2477.63 659 L 2475.88 655.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2664 659 L 2747.63 659" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2752.88 659 L 2745.88 662.5 L 2747.63 659 L 2745.88 655.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="2484" y="624" width="180" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 171px; height: 1px; padding-top: 659px; margin-left: 2491px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">populateSeries(...)</div></div></div></foreignObject><text x="2491" y="663" fill="#000000" font-family="source code pro" font-size="13px">populateSeries(...)</text></switch></g><path d="M 2664 659.59 L 2674 659.59 Q 2684 659.59 2684 669.59 L 2684 729.59 Q 2684 739.59 2694 739.59 L 2747.63 739.59" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2752.88 739.59 L 2745.88 743.09 L 2747.63 739.59 L 2745.88 736.09 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="2754" y="624" width="280" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 271px; height: 1px; padding-top: 659px; margin-left: 2761px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">querier, err := q.Querier(...)</div></div></div></foreignObject><text x="2761" y="663" fill="#000000" font-family="source code pro" font-size="13px">querier, err := q.Querier(...)</text></switch></g><rect x="2754" y="704" width="480" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 471px; height: 1px; padding-top: 739px; margin-left: 2761px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>set, wrn, err = querier.Select(params, n.LabelMatchers...)</div><div>n.unexpandedSeriesSet = set</div></div></div></div></foreignObject><text x="2761" y="743" fill="#000000" font-family="source code pro" font-size="13px">set, wrn, err = querier.Select(params, n.LabelMatchers...)...</text></switch></g><path d="M 1779 614 L 1779.23 649.59 Q 1779.29 659.59 1789.29 659.42 L 1807.63 659.11" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1812.88 659.02 L 1805.94 662.64 L 1807.63 659.11 L 1805.82 655.64 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><rect x="1814" y="624" width="620" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 611px; height: 1px; padding-top: 659px; margin-left: 1821px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">querier, warnings, err := ng.populateSeries(ctxPrepare, query.queryable, s)</div></div></div></foreignObject><text x="1821" y="663" fill="#000000" font-family="source code pro" font-size="13px">querier, warnings, err := ng.populateSeries(ctxPrepare, query.queryable, s)</text></switch></g><rect x="1814" y="884" width="270" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 261px; height: 1px; padding-top: 914px; margin-left: 1821px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return result, warnings, nil</div></div></div></foreignObject><text x="1821" y="918" fill="#000000" font-family="source code pro" font-size="13px">return result, warnings, nil</text></switch></g><rect x="664" y="474" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 231px; height: 1px; padding-top: 504px; margin-left: 671px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return v, nil</div></div></div></foreignObject><text x="671" y="508" fill="#000000" font-family="source code pro" font-size="13px">return v, nil</text></switch></g><path d="M 2465 277 L 2454 277.12 Q 2444 277.24 2444 287.24 L 2444 369.59 Q 2444 379.59 2437.18 379.39 L 2430.37 379.19" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 2425.12 379.03 L 2432.22 375.74 L 2430.37 379.19 L 2432.01 382.74 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 2464 443 L 2454 443.06 Q 2444 443.12 2444 433.71 L 2444 429 Q 2444 424.29 2437.18 424.29 L 2430.37 424.29" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 2425.12 424.29 L 2432.12 420.79 L 2430.37 424.29 L 2432.12 427.79 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 139px; margin-left: 31px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">1. 创建查询引擎实例</div></div></div></foreignObject><text x="31" y="143" fill="#000000" font-family="source code pro" font-size="13px">1. 创建查询引擎实例</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 245px; margin-left: 31px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">2. 创建查询</div></div></div></foreignObject><text x="31" y="249" fill="#000000" font-family="source code pro" font-size="13px">2. 创建查询</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 832px; margin-left: 2414px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">匹配expr 中符合条件的数据</div></div></div></foreignObject><text x="2414" y="836" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">匹配expr 中符合条件的数据</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 314px; margin-left: 749px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">创建查询语句实例 Query</div></div></div></foreignObject><text x="749" y="318" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">创建查询语句实例 Query</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 414px; margin-left: 619px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">查询语句执行</div></div></div></foreignObject><text x="619" y="418" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">查询语句执行</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 604px; margin-left: 2878px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">查询出来的数据，会绑定到 s.Expr 上</div></div></div></foreignObject><text x="2878" y="608" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">查询出来的数据，会绑定到 s.Expr 上</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 39px; margin-left: 124px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 18px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">Promql 查询引擎实现</div></div></div></foreignObject><text x="124" y="44" fill="#000000" font-family="source code pro" font-size="18px" text-anchor="middle">Promql 查询引擎实现</text></switch></g></g></svg>
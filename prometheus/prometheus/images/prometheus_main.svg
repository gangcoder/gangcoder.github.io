<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1791px" height="1054px" viewBox="-0.5 -0.5 1791 1054" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-02-21T03:22:39.324Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.5.3 Chrome/78.0.3904.130 Electron/7.1.9 Safari/537.36&quot; etag=&quot;EniMuU6XjDOc7qdeQl8R&quot; version=&quot;12.5.3&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;0pcfnNVmlderlTSmVUOS&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="20" y="130" width="640" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 631px; height: 1px; padding-top: 160px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>a := kingpin.New(filepath.Base(os.Args[0]), "The Prometheus monitoring server")</div><div>_, err := a.Parse(os.Args[1:])</div></div></div></div></foreignObject><text x="27" y="164" fill="#000000" font-family="source code pro" font-size="13px">a := kingpin.New(filepath.Base(os.Args[0]), "The Prometheus monitoring server")...</text></switch></g><path d="M 380 280 L 733.63 280" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 738.88 280 L 731.88 283.5 L 733.63 280 L 731.88 276.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="250" width="360" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 351px; height: 1px; padding-top: 280px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">notifierManager = notifier.NewManager(...)</div></div></div></foreignObject><text x="27" y="284" fill="#000000" font-family="source code pro" font-size="13px">notifierManager = notifier.NewManager(...)</text></switch></g><rect x="740" y="250" width="400" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 391px; height: 1px; padding-top: 280px; margin-left: 747px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">notifier.Run(discoveryManagerNotify.SyncCh())</div></div></div></foreignObject><text x="747" y="284" fill="#000000" font-family="source code pro" font-size="13px">notifier.Run(discoveryManagerNotify.SyncCh())</text></switch></g><path d="M 460 410 L 733.63 410" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 738.88 410 L 731.88 413.5 L 733.63 410 L 731.88 406.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="380" width="440" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 431px; height: 1px; padding-top: 410px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">discoveryManagerScrape  = discovery.NewManager(...)</div></div></div></foreignObject><text x="27" y="414" fill="#000000" font-family="source code pro" font-size="13px">discoveryManagerScrape  = discovery.NewManager(...)</text></switch></g><rect x="740" y="380" width="400" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 391px; height: 1px; padding-top: 410px; margin-left: 747px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">discoveryManagerScrape.Run()</div></div></div></foreignObject><text x="747" y="414" fill="#000000" font-family="source code pro" font-size="13px">discoveryManagerScrape.Run()</text></switch></g><path d="M 460 540 L 733.63 540" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 738.88 540 L 731.88 543.5 L 733.63 540 L 731.88 536.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="510" width="440" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 431px; height: 1px; padding-top: 540px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">discoveryManagerNotify  = discovery.NewManager(...)</div></div></div></foreignObject><text x="27" y="544" fill="#000000" font-family="source code pro" font-size="13px">discoveryManagerNotify  = discovery.NewManager(...)</text></switch></g><rect x="740" y="510" width="400" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 391px; height: 1px; padding-top: 540px; margin-left: 747px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">discoveryManagerNotify.Run()</div></div></div></foreignObject><text x="747" y="544" fill="#000000" font-family="source code pro" font-size="13px">discoveryManagerNotify.Run()</text></switch></g><path d="M 460 660 L 733.63 660" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 738.88 660 L 731.88 663.5 L 733.63 660 L 731.88 656.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="630" width="440" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 431px; height: 1px; padding-top: 660px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">scrapeManager = scrape.NewManager(..., fanoutStorage)</div></div></div></foreignObject><text x="27" y="664" fill="#000000" font-family="source code pro" font-size="13px">scrapeManager = scrape.NewManager(..., fanoutStorage)</text></switch></g><rect x="740" y="630" width="420" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 411px; height: 1px; padding-top: 660px; margin-left: 747px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">scrapeManager.Run(discoveryManagerScrape.SyncCh())</div></div></div></foreignObject><text x="747" y="664" fill="#000000" font-family="source code pro" font-size="13px">scrapeManager.Run(discoveryManagerScrape.SyncCh())</text></switch></g><path d="M 1290 740 L 1290 730 Q 1290 720 1280 720 L 389 720 Q 379 720 379.01 730 L 379.03 757.23" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 379.04 762.48 L 375.53 755.49 L 379.03 757.23 L 382.53 755.48 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><rect x="1180" y="740" width="440" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 431px; height: 1px; padding-top: 770px; margin-left: 1187px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">queryEngine = promql.NewEngine(opts)</div></div></div></foreignObject><text x="1187" y="774" fill="#000000" font-family="source code pro" font-size="13px">queryEngine = promql.NewEngine(opts)</text></switch></g><path d="M 680 838 L 733.63 838" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 738.88 838 L 731.88 841.5 L 733.63 838 L 731.88 834.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="763" width="660" height="150" rx="22.5" ry="22.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 651px; height: 1px; padding-top: 838px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ruleManager = rules.NewManager(<span>&amp;rules.ManagerOptions{</span><div>    Appendable:      fanoutStorage,</div><div>    TSDB:            localStorage,</div><div>    QueryFunc:       rules.EngineQueryFunc(queryEngine, fanoutStorage),</div><div>    NotifyFunc:      sendAlerts(notifierManager, cfg.web.ExternalURL.String()),</div><div>    ...</div><span>}</span>)</div></div></div></foreignObject><text x="27" y="842" fill="#000000" font-family="source code pro" font-size="13px">ruleManager = rules.NewManager(&amp;rules.ManagerOptions{...</text></switch></g><rect x="740" y="808" width="400" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 391px; height: 1px; padding-top: 838px; margin-left: 747px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">ruleManager.Run()</div></div></div></foreignObject><text x="747" y="842" fill="#000000" font-family="source code pro" font-size="13px">ruleManager.Run()</text></switch></g><path d="M 460 1003 L 733.63 1003" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 738.88 1003 L 731.88 1006.5 L 733.63 1003 L 731.88 999.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="973" width="440" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 431px; height: 1px; padding-top: 1003px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">webHandler := web.New(...)</div></div></div></foreignObject><text x="27" y="1007" fill="#000000" font-family="source code pro" font-size="13px">webHandler := web.New(...)</text></switch></g><rect x="740" y="973" width="400" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 391px; height: 1px; padding-top: 1003px; margin-left: 747px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">webHandler.Run(ctxWeb)</div></div></div></foreignObject><text x="747" y="1007" fill="#000000" font-family="source code pro" font-size="13px">webHandler.Run(ctxWeb)</text></switch></g><path d="M 1262.01 280 L 1262 390 Q 1262 400 1272 400 L 1303.63 400" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1308.88 400 L 1301.88 403.5 L 1303.63 400 L 1301.88 396.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="1310" y="330" width="380" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 371px; height: 1px; padding-top: 400px; margin-left: 1317px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>db, err := tsdb.Open(</div><div><span style="white-space: pre">	</span>cfg.localStoragePath,</div><div><span style="white-space: pre">	</span>log.With(logger, "component", "tsdb"),</div><div><span style="white-space: pre">	</span>prometheus.DefaultRegisterer,</div><div><span style="white-space: pre">	</span>&amp;cfg.tsdb,</div><div>)</div><div>localStorage.Set(db, startTimeMargin)</div></div></div></div></foreignObject><text x="1317" y="404" fill="#000000" font-family="source code pro" font-size="13px">db, err := tsdb.Open(...</text></switch></g><path d="M 1180 235 L 1160 235 Q 1150 235 1150 245 L 1150 600 Q 1150 610 1140 610 L 360 610 Q 350 610 350 616.82 L 350 623.63" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 350 628.88 L 346.5 621.88 L 350 623.63 L 353.5 621.88 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><path d="M 1180 258 L 1175 258 Q 1170 258 1170 268 L 1170 700 Q 1170 710 1160 710 L 360 710 Q 350 710 350 720 L 350 756.63" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 350 761.88 L 346.5 754.88 L 350 756.63 L 353.5 754.88 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="all"/><rect x="1180" y="190" width="590" height="90" rx="13.5" ry="13.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 581px; height: 1px; padding-top: 235px; margin-left: 1187px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>localStorage  = &amp;tsdb.ReadyStorage{}</div><div>remoteStorage = remote.NewStorage()</div><div>fanoutStorage = storage.NewFanout(logger, localStorage, remoteStorage)</div></div></div></div></foreignObject><text x="1187" y="239" fill="#000000" font-family="source code pro" font-size="13px">localStorage  = &amp;tsdb.ReadyStorage{}...</text></switch></g><rect x="20" y="20" width="250" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 35px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 18px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">Prometheus 服务启动函数</div></div></div></foreignObject><text x="27" y="40" fill="#000000" font-family="source code pro" font-size="18px">Prometheus 服务启动函数</text></switch></g><rect x="20" y="100" width="70" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 110px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">解析配置</div></div></div></foreignObject><text x="27" y="114" fill="#000000" font-family="source code pro" font-size="13px">解析配置</text></switch></g><rect x="20" y="220" width="70" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 230px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 13px">通知服务</font></div></div></div></foreignObject><text x="27" y="234" fill="#000000" font-family="source code pro" font-size="13px">通知服务</text></switch></g><rect x="20" y="350" width="140" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 360px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 13px">抓取服务发现管理器</font></div></div></div></foreignObject><text x="27" y="364" fill="#000000" font-family="source code pro" font-size="13px">抓取服务发现管理器</text></switch></g><rect x="20" y="480" width="140" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 490px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 13px">通知服务发现管理器</font></div></div></div></foreignObject><text x="27" y="494" fill="#000000" font-family="source code pro" font-size="13px">通知服务发现管理器</text></switch></g><rect x="20" y="600" width="70" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 610px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 13px">抓取服务</font></div></div></div></foreignObject><text x="27" y="614" fill="#000000" font-family="source code pro" font-size="13px">抓取服务</text></switch></g><rect x="20" y="730" width="90" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 740px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 13px">规则管理器</font></div></div></div></foreignObject><text x="27" y="744" fill="#000000" font-family="source code pro" font-size="13px">规则管理器</text></switch></g><rect x="20" y="940" width="80" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 950px; margin-left: 27px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 13px">Web 服务</font></div></div></div></foreignObject><text x="27" y="954" fill="#000000" font-family="source code pro" font-size="13px">Web 服务</text></switch></g><rect x="1190" y="690" width="80" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 700px; margin-left: 1230px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">规则管理器</div></div></div></foreignObject><text x="1230" y="704" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">规则管理器</text></switch></g><rect x="1183" y="166" width="70" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 176px; margin-left: 1218px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">存储实例</div></div></div></foreignObject><text x="1218" y="180" fill="#000000" font-family="source code pro" font-size="13px" text-anchor="middle">存储实例</text></switch></g></g></svg>
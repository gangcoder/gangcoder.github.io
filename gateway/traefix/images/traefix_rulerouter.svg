<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1035px" height="619px" viewBox="-0.5 -0.5 1035 619" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-08-03T15:32:51.202Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.6.5 Chrome/80.0.3987.86 Electron/8.0.0 Safari/537.36&quot; etag=&quot;anEQ_UjgzF42ywHOop9P&quot; version=&quot;12.6.5&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;dLKUz84nMzkN7yNbtNRz&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-779-162-225-26-0"><rect x="779" y="162" width="225" height="26"/></clipPath><clipPath id="mx-clip-779-188-225-26-0"><rect x="779" y="188" width="225" height="26"/></clipPath><clipPath id="mx-clip-669-519-328-26-0"><rect x="669" y="519" width="328" height="26"/></clipPath></defs><g><path d="M 774 157 L 774 131 L 1004 131 L 1004 157" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 774 157 L 774 209 L 1004 209 L 1004 157" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 774 157 L 1004 157" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="780.5" y="149">Router</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-779-162-225-26-0)" font-size="13px"><text x="780.5" y="175.5">- : *mux.Router</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-779-188-225-26-0)" font-size="13px"><text x="780.5" y="201.5">- parser: predicate.Parser</text></g><path d="M 664 496 L 654 496 Q 644 496 644 506 L 644 570 Q 644 580 634 580 L 153.8 580 Q 143.8 580 143.78 570 L 143.76 557.37" fill="none" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 143.75 552.12 L 147.26 559.11 L 143.76 557.37 L 140.26 559.12 Z" fill="#019ed5" stroke="#019ed5" stroke-miterlimit="10" pointer-events="none"/><path d="M 664 513.5 L 664 481.5 L 997 481.5 L 997 513.5" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 664 513.5 L 664 539.5 L 997 539.5 L 997 513.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 664 513.5 L 997 513.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="670.5" y="494.5">&lt;&lt;interface&gt;&gt;</text><text x="670.5" y="510.5">Handler</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-669-519-328-26-0)" font-size="13px"><text x="670.5" y="532">+ ServeHTTP(ResponseWriter, *Request)</text></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 138px; margin-left: 33px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">1. 创建http 规则路由分发器</div></div></div></foreignObject><text x="33" y="142" fill="#000000" font-family="source code pro" font-size="13px">1. 创建http 规则路由分发器</text></switch></g><rect x="30.5" y="155" width="169" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 162px; height: 1px; padding-top: 185px; margin-left: 38px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func NewRouter()</div></div></div></foreignObject><text x="38" y="189" fill="#000000" font-family="source code pro" font-size="13px">func NewRouter()</text></switch></g><rect x="303" y="131" width="391" height="108" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 384px; height: 1px; padding-top: 185px; margin-left: 310px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">parser, err := newParser()<br />return &amp;Router{<br />    Router: mux.NewRouter().SkipClean(true),<br />    parser: parser,<br />}, nil</div></div></div></foreignObject><text x="310" y="189" fill="#000000" font-family="source code pro" font-size="13px">parser, err := newParser()...</text></switch></g><path d="M 199.5 185 L 296.63 185" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 301.88 185 L 294.88 188.5 L 296.63 185 L 294.88 181.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 304px; margin-left: 33px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">2. 添加路由配置到路由分发器</div></div></div></foreignObject><text x="33" y="308" fill="#000000" font-family="source code pro" font-size="13px">2. 添加路由配置到路由分发器</text></switch></g><rect x="30.5" y="325.5" width="142" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 135px; height: 1px; padding-top: 356px; margin-left: 38px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">AddRoute(...)</div></div></div></foreignObject><text x="38" y="359" fill="#000000" font-family="source code pro" font-size="13px">AddRoute(...)</text></switch></g><rect x="264" y="311" width="488" height="89" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 481px; height: 1px; padding-top: 356px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">parse, err := r.parser.Parse(rule)<br />buildTree, ok := parse.(treeBuilder)<br />route := r.NewRoute().Handler(handler).Priority(priority)<br />return addRuleOnRoute(route, buildTree())</div></div></div></foreignObject><text x="271" y="359" fill="#000000" font-family="source code pro" font-size="13px">parse, err := r.parser.Parse(rule)...</text></switch></g><path d="M 172.5 355.5 L 257.63 355.5" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 262.88 355.5 L 255.88 359 L 257.63 355.5 L 255.88 352 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 472px; margin-left: 33px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">3. 实现 http.Handler 接口</div></div></div></foreignObject><text x="33" y="475" fill="#000000" font-family="source code pro" font-size="13px">3. 实现 http.Handler 接口</text></switch></g><rect x="30.5" y="491" width="151" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 144px; height: 1px; padding-top: 521px; margin-left: 38px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">ServeHTTP(...)</div></div></div></foreignObject><text x="38" y="525" fill="#000000" font-family="source code pro" font-size="13px">ServeHTTP(...)</text></switch></g><rect x="286" y="481.5" width="289" height="79" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 282px; height: 1px; padding-top: 521px; margin-left: 293px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">if r.Match(req, &amp;match) {<br />    handler = match.Handler<br />}<br />handler.ServeHTTP(w, req)</div></div></div></foreignObject><text x="293" y="525" fill="#000000" font-family="source code pro" font-size="13px">if r.Match(req, &amp;match) {...</text></switch></g><path d="M 181.5 521 L 279.63 521" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 284.88 521 L 277.88 524.5 L 279.63 521 L 277.88 517.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 774 170 L 744 170 Q 734 170 734 180 L 734 202 Q 734 212 724 212 L 700.37 212" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 695.12 212 L 702.12 208.5 L 700.37 212 L 702.12 215.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 45px; margin-left: 33px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 18px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">Traefix Http 规则路由器</div></div></div></foreignObject><text x="33" y="50" fill="#000000" font-family="source code pro" font-size="18px">Traefix Http 规则路由器</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>
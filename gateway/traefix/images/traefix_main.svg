<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2282px" height="1065px" viewBox="-0.5 -0.5 2282 1065" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-07-26T13:20:50.440Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.6.5 Chrome/80.0.3987.86 Electron/8.0.0 Safari/537.36&quot; etag=&quot;CsWLL3wFEgBpdmREiXcp&quot; version=&quot;12.6.5&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;M4SQ_L6F5_awELWkZWe0&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="30" y="128" width="54" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 138px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">1.创建服务</div></div></div></foreignObject><text x="32" y="142" fill="#000000" font-family="source code pro" font-size="13px">1.创建服务</text></switch></g><rect x="30" y="158" width="214" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 207px; height: 1px; padding-top: 188px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">func setupServer(...)</div></div></div></foreignObject><text x="37" y="192" fill="#000000" font-family="source code pro" font-size="13px">func setupServer(...)</text></switch></g><rect x="430" y="153" width="706" height="70" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 699px; height: 1px; padding-top: 188px; margin-left: 437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">providerAggregator := aggregator.NewProviderAggregator(*staticConfiguration.Providers)</div></div></div></foreignObject><text x="437" y="192" fill="#000000" font-family="source code pro" font-size="13px">providerAggregator := aggregator.NewProviderAggregator(*staticConfiguration.Providers)</text></switch></g><rect x="430" y="238" width="710" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 703px; height: 1px; padding-top: 268px; margin-left: 437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">serverEntryPointsTCP, err := server.NewTCPEntryPoints(staticConfiguration.EntryPoints)</div></div></div></foreignObject><text x="437" y="272" fill="#000000" font-family="source code pro" font-size="13px">serverEntryPointsTCP, err := server.NewTCPEntryPoints(staticConfiguration.EntryPoints)</text></switch></g><rect x="430" y="317" width="646" height="58" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 639px; height: 1px; padding-top: 346px; margin-left: 437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">metricsRegistry := registerMetricClients(staticConfiguration.Metrics)</div></div></div></foreignObject><text x="437" y="350" fill="#000000" font-family="source code pro" font-size="13px">metricsRegistry := registerMetricClients(staticConfiguration.Metrics)</text></switch></g><rect x="430" y="392" width="830" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 823px; height: 1px; padding-top: 422px; margin-left: 437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">managerFactory := service.NewManagerFactory(*staticConfiguration, routinesPool, metricsRegistry)</div></div></div></foreignObject><text x="437" y="426" fill="#000000" font-family="source code pro" font-size="13px">managerFactory := service.NewManagerFactory(*staticConfiguration, routinesPool, metricsRegistry)</text></switch></g><rect x="430" y="469" width="860" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 853px; height: 1px; padding-top: 499px; margin-left: 437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">routerFactory := server.NewRouterFactory(*staticConfiguration, managerFactory, tlsManager, chainBuilder)</div></div></div></foreignObject><text x="437" y="503" fill="#000000" font-family="source code pro" font-size="13px">routerFactory := server.NewRouterFactory(*staticConfiguration, managerFactory, tlsManager, chainBuilder)</text></switch></g><rect x="430" y="548" width="650" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 643px; height: 1px; padding-top: 608px; margin-left: 437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">watcher := server.NewConfigurationWatcher(<br />    routinesPool,<br />    providerAggregator,<br />    time.Duration(staticConfiguration.Providers.ProvidersThrottleDuration),<br />    defaultEntryPoints,<br />)</div></div></div></foreignObject><text x="437" y="612" fill="#000000" font-family="source code pro" font-size="13px">watcher := server.NewConfigurationWatcher(...</text></switch></g><rect x="430" y="686" width="900" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 893px; height: 1px; padding-top: 716px; margin-left: 437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">watcher.AddListener(switchRouter(routerFactory, acmeProviders, serverEntryPointsTCP, serverEntryPointsUDP))</div></div></div></foreignObject><text x="437" y="720" fill="#000000" font-family="source code pro" font-size="13px">watcher.AddListener(switchRouter(routerFactory, acmeProviders, serverEntryPointsTCP, serverEntryPointsUDP))</text></switch></g><rect x="430" y="768" width="600" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 593px; height: 1px; padding-top: 798px; margin-left: 437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">return server.NewServer(routinesPool, serverEntryPointsTCP, ...), nil</div></div></div></foreignObject><text x="437" y="802" fill="#000000" font-family="source code pro" font-size="13px">return server.NewServer(routinesPool, serverEntryPointsTCP, ...), nil</text></switch></g><rect x="1170" y="768" width="196" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 189px; height: 1px; padding-top: 798px; margin-left: 1177px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">func NewServer(...)</div></div></div></foreignObject><text x="1177" y="802" fill="#000000" font-family="source code pro" font-size="13px">func NewServer(...)</text></switch></g><rect x="1510" y="696" width="354" height="132" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 347px; height: 1px; padding-top: 762px; margin-left: 1517px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">func NewServer(...) *Server {<br />    srv := &amp;Server{<br />        watcher: watcher,<br />        tcpEntryPoints: entryPoints,<br />        chainBuilder: chainBuilder,<br />    }<br />    return srv<br />}</div></div></div></foreignObject><text x="1517" y="766" fill="#000000" font-family="source code pro" font-size="13px">func NewServer(...) *Server {...</text></switch></g><path d="M 244 188 L 423.63 188" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 188 L 421.88 191.5 L 423.63 188 L 421.88 184.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 244 188 L 340 188 Q 350 188 350 198 L 350 258 Q 350 268 360 268 L 423.63 268" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 268 L 421.88 271.5 L 423.63 268 L 421.88 264.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 244 188 L 340 188 Q 350 188 350 198 L 350 336 Q 350 346 360 346 L 423.63 346" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 346 L 421.88 349.5 L 423.63 346 L 421.88 342.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 244 188 L 340 188 Q 350 188 350 198 L 350 412 Q 350 422 360 422 L 423.63 422" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 422 L 421.88 425.5 L 423.63 422 L 421.88 418.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 244 188 L 340 188 Q 350 188 350 198 L 350 489 Q 350 499 360 499 L 423.63 499" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 499 L 421.88 502.5 L 423.63 499 L 421.88 495.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 244 188 L 340 188 Q 350 188 350 198 L 350 598 Q 350 608 360 608 L 423.63 608" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 608 L 421.88 611.5 L 423.63 608 L 421.88 604.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 244 188 L 340 188 Q 350 188 350 198 L 350 706 Q 350 716 360 716 L 423.63 716" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 716 L 421.88 719.5 L 423.63 716 L 421.88 712.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 244 188 L 340 188 Q 350 188 350 198 L 350 788 Q 350 798 360 798 L 423.63 798" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 798 L 421.88 801.5 L 423.63 798 L 421.88 794.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1030 798 L 1163.63 798" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1168.88 798 L 1161.88 801.5 L 1163.63 798 L 1161.88 794.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1366 798 L 1428 798 Q 1438 798 1438 788 L 1438 772 Q 1438 762 1448 762 L 1503.63 762" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1508.88 762 L 1501.88 765.5 L 1503.63 762 L 1501.88 758.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="30" y="840" width="63" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 850px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">2. 运行服务</div></div></div></foreignObject><text x="32" y="854" fill="#000000" font-family="source code pro" font-size="13px">2. 运行服务</text></switch></g><rect x="30" y="870" width="259" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 252px; height: 1px; padding-top: 900px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Start(ctx context.Context)</div></div></div></foreignObject><text x="37" y="904" fill="#000000" font-family="source code pro" font-size="13px">Start(ctx context.Context)</text></switch></g><rect x="430" y="864" width="241" height="72" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 234px; height: 1px; padding-top: 900px; margin-left: 437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">s.tcpEntryPoints.Start()<br />s.watcher.Start()</div></div></div></foreignObject><text x="437" y="904" fill="#000000" font-family="source code pro" font-size="13px">s.tcpEntryPoints.Start()...</text></switch></g><rect x="781" y="858" width="470" height="84" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 463px; height: 1px; padding-top: 900px; margin-left: 788px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">for entryPointName, serverEntryPoint := range eps {<br />    go serverEntryPoint.Start(ctx)<br />}</div></div></div></foreignObject><text x="788" y="904" fill="#000000" font-family="source code pro" font-size="13px">for entryPointName, serverEntryPoint := range eps {...</text></switch></g><rect x="1321" y="870" width="230" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 223px; height: 1px; padding-top: 900px; margin-left: 1328px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Start(ctx context.Context)</div></div></div></foreignObject><text x="1328" y="904" fill="#000000" font-family="source code pro" font-size="13px">Start(ctx context.Context)</text></switch></g><rect x="1631" y="870" width="620" height="132" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 613px; height: 1px; padding-top: 936px; margin-left: 1638px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">for {<br />    conn, err := e.listener.Accept()<br />    writeCloser, err := writeCloser(conn)<br />    safe.Go(func() {<br />        e.switcher.ServeTCP(newTrackedConnection(writeCloser, e.tracker))<br />    })<br />}</div></div></div></foreignObject><text x="1638" y="940" fill="#000000" font-family="source code pro" font-size="13px">for {...</text></switch></g><rect x="781" y="962" width="88" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 81px; height: 1px; padding-top: 992px; margin-left: 788px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Start()</div></div></div></foreignObject><text x="788" y="996" fill="#000000" font-family="source code pro" font-size="13px">Start()</text></switch></g><rect x="969" y="950" width="382" height="84" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 375px; height: 1px; padding-top: 992px; margin-left: 976px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">c.routinesPool.GoCtx(c.listenProviders)<br />c.routinesPool.GoCtx(c.listenConfigurations)<br />c.startProvider()</div></div></div></foreignObject><text x="976" y="996" fill="#000000" font-family="source code pro" font-size="13px">c.routinesPool.GoCtx(c.listenProviders)...</text></switch></g><path d="M 289 900 L 423.63 900" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 428.88 900 L 421.88 903.5 L 423.63 900 L 421.88 896.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 671 900 L 774.63 900" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 779.88 900 L 772.88 903.5 L 774.63 900 L 772.88 896.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1251 900 L 1314.63 900" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1319.88 900 L 1312.88 903.5 L 1314.63 900 L 1312.88 896.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 1551 900 L 1581 900 Q 1591 900 1591 910 L 1591 926 Q 1591 936 1601 936 L 1624.63 936" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1629.88 936 L 1622.88 939.5 L 1624.63 936 L 1622.88 932.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 671 900 L 711 900 Q 721 900 721 910 L 721 982 Q 721 992 731 992 L 774.63 992" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 779.88 992 L 772.88 995.5 L 774.63 992 L 772.88 988.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><path d="M 869 992 L 962.63 992" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 967.88 992 L 960.88 995.5 L 962.63 992 L 960.88 988.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="all"/><rect x="30" y="30" width="170" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 40px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font face="source code pro" style="font-size: 18px">Traefix 服务入口</font></div></div></div></foreignObject><text x="32" y="44" fill="#000000" font-family="Helvetica" font-size="12px">Traefix 服务入口</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>
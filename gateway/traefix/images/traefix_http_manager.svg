<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="4533px" height="890px" viewBox="-0.5 -0.5 4533 890" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-07-29T15:27:42.495Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.6.5 Chrome/80.0.3987.86 Electron/8.0.0 Safari/537.36&quot; etag=&quot;rUnc_KStU6jvQfjXbKDJ&quot; version=&quot;12.6.5&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;tqZyYC63o9fS1VPbxcA6&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-1556-168-325-26-0"><rect x="1556" y="168" width="325" height="26"/></clipPath><clipPath id="mx-clip-1556-194-325-26-0"><rect x="1556" y="194" width="325" height="26"/></clipPath><clipPath id="mx-clip-2875-431-305-26-0"><rect x="2875" y="431" width="305" height="26"/></clipPath><clipPath id="mx-clip-2875-457-305-26-0"><rect x="2875" y="457" width="305" height="26"/></clipPath></defs><g><path d="M 1551 163 L 1551 131 L 1881 131 L 1881 163" fill="#019ed5" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1551 163 L 1551 215 L 1881 215 L 1881 163" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1551 163 L 1881 163" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="1557.5" y="144">&lt;&lt;interface&gt;&gt;</text><text x="1557.5" y="160">serviceManager</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1556-168-325-26-0)" font-size="13px"><text x="1557.5" y="181.5">+ BuildHTTP(...) (http.Handler, error)</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-1556-194-325-26-0)" font-size="13px"><text x="1557.5" y="207.5">+ LaunchHealthCheck()</text></g><path d="M 2870 426 L 2870 400 L 3180 400 L 3180 426" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2870 426 L 2870 478 L 3180 478 L 3180 426" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2870 426 L 3180 426" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="source code pro" font-size="13px"><text x="2876.5" y="418">LbStatusUpdater</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2875-431-305-26-0)" font-size="13px"><text x="2876.5" y="444.5">- BalancerHandler</text></g><g fill="#000000" font-family="source code pro" clip-path="url(#mx-clip-2875-457-305-26-0)" font-size="13px"><text x="2876.5" y="470.5">- serviceInfo: *runtime.ServiceInfo</text></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 141px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">1. 创建HTTP 处理handler</div></div></div></foreignObject><text x="32" y="145" fill="#000000" font-family="source code pro" font-size="13px">1. 创建HTTP 处理handler</text></switch></g><rect x="30" y="161" width="440" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 433px; height: 1px; padding-top: 191px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">m.serviceManager.BuildHTTP(ctx, router.Service, rm)</div></div></div></foreignObject><text x="37" y="195" fill="#000000" font-family="source code pro" font-size="13px">m.serviceManager.BuildHTTP(ctx, router.Service, rm)</text></switch></g><rect x="590" y="161" width="151" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 144px; height: 1px; padding-top: 191px; margin-left: 597px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">BuildHTTP(...)</div></div></div></foreignObject><text x="597" y="195" fill="#000000" font-family="source code pro" font-size="13px">BuildHTTP(...)</text></switch></g><rect x="827" y="131" width="583" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 576px; height: 1px; padding-top: 191px; margin-left: 834px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">var lb http.Handler<br />switch {<br />case conf.LoadBalancer != nil:<br />    lb, err = m.getLoadBalancerServiceHandler(ctx, serviceName, ...)<br />}<br />return lb, nil</div></div></div></foreignObject><text x="834" y="195" fill="#000000" font-family="source code pro" font-size="13px">var lb http.Handler...</text></switch></g><path d="M 470 191 L 583.63 191" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 588.88 191 L 581.88 194.5 L 583.63 191 L 581.88 187.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 741 191 L 820.63 191" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 825.88 191 L 818.88 194.5 L 820.63 191 L 818.88 187.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 267px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">2. 轮询负载均衡</div></div></div></foreignObject><text x="32" y="271" fill="#000000" font-family="source code pro" font-size="13px">2. 轮询负载均衡</text></switch></g><rect x="30" y="287" width="300" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 293px; height: 1px; padding-top: 317px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">getLoadBalancerServiceHandler(...)</div></div></div></foreignObject><text x="37" y="321" fill="#000000" font-family="source code pro" font-size="13px">getLoadBalancerServiceHandler(...)</text></switch></g><rect x="440" y="281" width="690" height="72" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 683px; height: 1px; padding-top: 317px; margin-left: 447px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">fwd, err := buildProxy(service.PassHostHeader, ...)<br />handler, err := chain.Append(alHandler).Then(pipelining.New(ctx, fwd, "pipelining"))</div></div></div></foreignObject><text x="447" y="321" fill="#000000" font-family="source code pro" font-size="13px">fwd, err := buildProxy(service.PassHostHeader, ...)...</text></switch></g><rect x="440" y="370" width="610" height="84" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 603px; height: 1px; padding-top: 412px; margin-left: 447px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">balancer, err := m.getLoadBalancer(ctx, serviceName, service, handler)<br />m.balancers[serviceName] = append(m.balancers[serviceName], balancer)<br />return emptybackendhandler.New(balancer), nil</div></div></div></foreignObject><text x="447" y="416" fill="#000000" font-family="source code pro" font-size="13px">balancer, err := m.getLoadBalancer(ctx, serviceName, service, handler)...</text></switch></g><rect x="1250" y="287" width="205" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 317px; margin-left: 1257px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func buildProxy(...)</div></div></div></foreignObject><text x="1257" y="321" fill="#000000" font-family="source code pro" font-size="13px">func buildProxy(...)</text></switch></g><rect x="1551" y="251" width="360" height="132" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 353px; height: 1px; padding-top: 317px; margin-left: 1558px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">proxy := &amp;httputil.ReverseProxy{<br />    Director: func(outReq *http.Request) {<br />        u := outReq.URL<br />    },<br />    Transport: defaultRoundTripper,<br />}<br />return proxy, nil</div></div></div></foreignObject><text x="1558" y="321" fill="#000000" font-family="source code pro" font-size="13px">proxy := &amp;httputil.ReverseProxy{...</text></switch></g><rect x="1250" y="418" width="205" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 448px; margin-left: 1257px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">getLoadBalancer(...)</div></div></div></foreignObject><text x="1257" y="452" fill="#000000" font-family="source code pro" font-size="13px">getLoadBalancer(...)</text></switch></g><rect x="1536" y="400" width="557" height="96" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 550px; height: 1px; padding-top: 448px; margin-left: 1543px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">lb, err := roundrobin.New(fwd, options...)<br />lbsu := healthcheck.NewLBStatusUpdater(lb, m.configs[serviceName])<br />err := m.upsertServers(ctx, lbsu, service.Servers)<br />return lbsu, nil</div></div></div></foreignObject><text x="1543" y="452" fill="#000000" font-family="source code pro" font-size="13px">lb, err := roundrobin.New(fwd, options...)...</text></switch></g><rect x="2183" y="418" width="250" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 243px; height: 1px; padding-top: 448px; margin-left: 2190px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func NewLBStatusUpdater(...)</div></div></div></foreignObject><text x="2190" y="452" fill="#000000" font-family="source code pro" font-size="13px">func NewLBStatusUpdater(...)</text></switch></g><rect x="2553" y="400" width="240" height="96" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 233px; height: 1px; padding-top: 448px; margin-left: 2560px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return &amp;LbStatusUpdater{<br />    BalancerHandler: bh,<br />    serviceInfo:     info,<br />}</div></div></div></foreignObject><text x="2560" y="452" fill="#000000" font-family="source code pro" font-size="13px">return &amp;LbStatusUpdater{...</text></switch></g><rect x="2183" y="529" width="187" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 180px; height: 1px; padding-top: 559px; margin-left: 2190px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">upsertServers(...)</div></div></div></foreignObject><text x="2190" y="563" fill="#000000" font-family="source code pro" font-size="13px">upsertServers(...)</text></switch></g><rect x="2446" y="511" width="400" height="96" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 393px; height: 1px; padding-top: 559px; margin-left: 2453px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">for name, srv := range servers {<br />    lb.UpsertServer(u, roundrobin.Weight(1))<br />}<br />return nil</div></div></div></foreignObject><text x="2453" y="563" fill="#000000" font-family="source code pro" font-size="13px">for name, srv := range servers {...</text></switch></g><rect x="2190" y="619" width="385" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 378px; height: 1px; padding-top: 649px; margin-left: 2197px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func New(lb healthcheck.BalancerHandler)</div></div></div></foreignObject><text x="2197" y="653" fill="#000000" font-family="source code pro" font-size="13px">func New(lb healthcheck.BalancerHandler)</text></switch></g><rect x="2675" y="619" width="331" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 324px; height: 1px; padding-top: 649px; margin-left: 2682px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return &amp;emptyBackend{next: lb}</div></div></div></foreignObject><text x="2682" y="653" fill="#000000" font-family="source code pro" font-size="13px">return &amp;emptyBackend{next: lb}</text></switch></g><rect x="3106" y="619" width="151" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 144px; height: 1px; padding-top: 649px; margin-left: 3113px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">ServeHTTP(...)</div></div></div></foreignObject><text x="3113" y="653" fill="#000000" font-family="source code pro" font-size="13px">ServeHTTP(...)</text></switch></g><rect x="3365" y="589" width="648" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 641px; height: 1px; padding-top: 649px; margin-left: 3372px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">if len(e.next.Servers()) == 0 {<br />    rw.WriteHeader(http.StatusServiceUnavailable)<br />    _, err := rw.Write([]byte(http.StatusText(http.StatusServiceUnavailable)))<br />} else {<br />    e.next.ServeHTTP(rw, req)<br />}</div></div></div></foreignObject><text x="3372" y="653" fill="#000000" font-family="source code pro" font-size="13px">if len(e.next.Servers()) == 0 {...</text></switch></g><path d="M 330 317 L 433.63 317" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 438.88 317 L 431.88 320.5 L 433.63 317 L 431.88 313.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 330 317 L 370 317 Q 380 317 380 327 L 380 402 Q 380 412 390 412 L 433.63 412" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 438.88 412 L 431.88 415.5 L 433.63 412 L 431.88 408.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1130 317 L 1243.63 317" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1248.88 317 L 1241.88 320.5 L 1243.63 317 L 1241.88 313.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1455 317 L 1544.63 317" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1549.88 317 L 1542.88 320.5 L 1544.63 317 L 1542.88 313.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1050 412 L 1140 412 Q 1150 412 1150 422 L 1150 438 Q 1150 448 1160 448 L 1243.63 448" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1248.88 448 L 1241.88 451.5 L 1243.63 448 L 1241.88 444.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1455 448 L 1529.63 448" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1534.88 448 L 1527.88 451.5 L 1529.63 448 L 1527.88 444.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2093 448 L 2176.63 448" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2181.88 448 L 2174.88 451.5 L 2176.63 448 L 2174.88 444.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2433 448 L 2546.63 448" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2551.88 448 L 2544.88 451.5 L 2546.63 448 L 2544.88 444.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2093 448 L 2130 448 Q 2140 448 2140 458 L 2140 549 Q 2140 559 2150 559 L 2176.63 559" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2181.88 559 L 2174.88 562.5 L 2176.63 559 L 2174.88 555.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2370 559 L 2439.63 559" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2444.88 559 L 2437.88 562.5 L 2439.63 559 L 2437.88 555.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2093 448 L 2130 448 Q 2140 448 2140 458 L 2140 639 Q 2140 649 2150 649 L 2183.63 649" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2188.88 649 L 2181.88 652.5 L 2183.63 649 L 2181.88 645.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2575 649 L 2668.63 649" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2673.88 649 L 2666.88 652.5 L 2668.63 649 L 2666.88 645.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3006 649 L 3099.63 649" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3104.88 649 L 3097.88 652.5 L 3099.63 649 L 3097.88 645.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3257 649 L 3358.63 649" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3363.88 649 L 3356.88 652.5 L 3358.63 649 L 3356.88 645.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 623px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">3. 节点健康检查</div></div></div></foreignObject><text x="32" y="627" fill="#000000" font-family="source code pro" font-size="13px">3. 节点健康检查</text></switch></g><rect x="30" y="643" width="196" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 189px; height: 1px; padding-top: 673px; margin-left: 37px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">LaunchHealthCheck()</div></div></div></foreignObject><text x="37" y="677" fill="#000000" font-family="source code pro" font-size="13px">LaunchHealthCheck()</text></switch></g><rect x="330" y="619" width="740" height="108" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 733px; height: 1px; padding-top: 673px; margin-left: 337px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">for serviceName, balancers := range m.balancers {<br />    backendHealthCheck = healthcheck.NewBackendConfig(*hcOpts, serviceName)<br />    backendConfigs[serviceName] = backendHealthCheck<br />}<br />healthcheck.GetHealthCheck().SetBackendsConfiguration(context.Background(), backendConfigs)</div></div></div></foreignObject><text x="337" y="677" fill="#000000" font-family="source code pro" font-size="13px">for serviceName, balancers := range m.balancers {...</text></switch></g><rect x="1181" y="643" width="259" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 252px; height: 1px; padding-top: 673px; margin-left: 1188px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func NewBackendConfig(...)</div></div></div></foreignObject><text x="1188" y="677" fill="#000000" font-family="source code pro" font-size="13px">func NewBackendConfig(...)</text></switch></g><rect x="1530" y="625" width="251" height="96" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 244px; height: 1px; padding-top: 673px; margin-left: 1537px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">return &amp;BackendConfig{<br />    Options: options,<br />    name:    backendName,<br />}</div></div></div></foreignObject><text x="1537" y="677" fill="#000000" font-family="source code pro" font-size="13px">return &amp;BackendConfig{...</text></switch></g><rect x="1181" y="763" width="286" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 279px; height: 1px; padding-top: 793px; margin-left: 1188px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">SetBackendsConfiguration(...)</div></div></div></foreignObject><text x="1188" y="797" fill="#000000" font-family="source code pro" font-size="13px">SetBackendsConfiguration(...)</text></switch></g><rect x="1562" y="733" width="355" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 348px; height: 1px; padding-top: 793px; margin-left: 1569px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">for _, backend := range backends {<br />    currentBackend := backend<br />    safe.Go(func() {<br />        hc.execute(ctx, currentBackend)<br />    })<br />}</div></div></div></foreignObject><text x="1569" y="797" fill="#000000" font-family="source code pro" font-size="13px">for _, backend := range backends {...</text></switch></g><rect x="2012" y="763" width="133" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 126px; height: 1px; padding-top: 793px; margin-left: 2019px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">execute(...)</div></div></div></foreignObject><text x="2019" y="797" fill="#000000" font-family="source code pro" font-size="13px">execute(...)</text></switch></g><rect x="2242" y="727" width="370" height="132" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 363px; height: 1px; padding-top: 793px; margin-left: 2249px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">ticker := time.NewTicker(backend.Interval)<br />for {<br />    select {<br />    case &lt;-ticker.C:<br />        hc.checkBackend(ctx, backend)<br />    }<br />}</div></div></div></foreignObject><text x="2249" y="797" fill="#000000" font-family="source code pro" font-size="13px">ticker := time.NewTicker(backend.Interval)...</text></switch></g><rect x="2702" y="763" width="178" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 171px; height: 1px; padding-top: 793px; margin-left: 2709px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">checkBackend(...)</div></div></div></foreignObject><text x="2709" y="797" fill="#000000" font-family="source code pro" font-size="13px">checkBackend(...)</text></switch></g><rect x="2972" y="733" width="490" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 483px; height: 1px; padding-top: 793px; margin-left: 2979px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">enabledURLs := backend.LB.Servers()<br />for _, enableURL := range enabledURLs {<br />    if err := checkHealth(enableURL, backend); err != nil {<br />        err := backend.LB.RemoveServer(enableURL)<br />    }<br />}</div></div></div></foreignObject><text x="2979" y="797" fill="#000000" font-family="source code pro" font-size="13px">enabledURLs := backend.LB.Servers()...</text></switch></g><rect x="3542" y="763" width="214" height="60" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 207px; height: 1px; padding-top: 793px; margin-left: 3549px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">func checkHealth(...)</div></div></div></foreignObject><text x="3549" y="797" fill="#000000" font-family="source code pro" font-size="13px">func checkHealth(...)</text></switch></g><rect x="3842" y="733" width="660" height="120" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 653px; height: 1px; padding-top: 793px; margin-left: 3849px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 13px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">req, err := backend.newRequest(serverURL)<br />resp, err := client.Do(req)<br />if resp.StatusCode &lt; http.StatusOK || resp.StatusCode &gt;= http.StatusBadRequest {<br />    return fmt.Errorf("received error status code: %v", resp.StatusCode)<br />}<br />return nil</div></div></div></foreignObject><text x="3849" y="797" fill="#000000" font-family="source code pro" font-size="13px">req, err := backend.newRequest(serverURL)...</text></switch></g><path d="M 226 673 L 323.63 673" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 328.88 673 L 321.88 676.5 L 323.63 673 L 321.88 669.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1070 673 L 1174.63 673" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1179.88 673 L 1172.88 676.5 L 1174.63 673 L 1172.88 669.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1440 673 L 1523.63 673" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1528.88 673 L 1521.88 676.5 L 1523.63 673 L 1521.88 669.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1070 673 L 1120 673 Q 1130 673 1130 683 L 1130 783 Q 1130 793 1140 793 L 1174.63 793" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1179.88 793 L 1172.88 796.5 L 1174.63 793 L 1172.88 789.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1467 793 L 1555.63 793" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1560.88 793 L 1553.88 796.5 L 1555.63 793 L 1553.88 789.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 1917 793 L 2005.63 793" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2010.88 793 L 2003.88 796.5 L 2005.63 793 L 2003.88 789.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2145 793 L 2235.63 793" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2240.88 793 L 2233.88 796.5 L 2235.63 793 L 2233.88 789.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2612 793 L 2695.63 793" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2700.88 793 L 2693.88 796.5 L 2695.63 793 L 2693.88 789.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2880 793 L 2965.63 793" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2970.88 793 L 2963.88 796.5 L 2965.63 793 L 2963.88 789.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3462 793 L 3535.63 793" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3540.88 793 L 3533.88 796.5 L 3535.63 793 L 3533.88 789.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3756 793 L 3835.63 793" fill="none" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 3840.88 793 L 3833.88 796.5 L 3835.63 793 L 3833.88 789.5 Z" fill="#fe4365" stroke="#fe4365" stroke-miterlimit="10" pointer-events="none"/><path d="M 2870 439 L 2841.5 439 Q 2831.5 439 2831.5 431.5 L 2831.5 427.75 Q 2831.5 424 2821.5 424 L 2799.37 424" fill="none" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><path d="M 2794.12 424 L 2801.12 420.5 L 2799.37 424 L 2801.12 427.5 Z" fill="#1dbf97" stroke="#1dbf97" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 45px; margin-left: 32px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 18px; font-family: source code pro; color: #000000; line-height: 1.2; pointer-events: none; white-space: nowrap; ">Traefix Http Service</div></div></div></foreignObject><text x="32" y="50" fill="#000000" font-family="source code pro" font-size="18px">Traefix Http Service</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>